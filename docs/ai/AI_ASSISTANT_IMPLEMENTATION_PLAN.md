# ๐ค ะะปะฐะฝ ะฒะฝะตะดัะตะฝะธั AI-ะฐััะธััะตะฝัะฐ ะดะปั ะธะทััะตะฝะธั ะฟะปะฐััะพัะผั

> **ะะตััะธั:** 1.0  
> **ะะฐัะฐ ัะพะทะดะฐะฝะธั:** 2025-01-27  
> **ะกัะฐััั:** ๐ ะะพัะพะฒ ะบ ัะตะฐะปะธะทะฐัะธะธ

---

## ๐ ะกะพะดะตัะถะฐะฝะธะต

1. [ะะฑะทะพั ะฟัะพะตะบัะฐ](#ะพะฑะทะพั-ะฟัะพะตะบัะฐ)
2. [ะััะธัะตะบัััะฐ ัะตัะตะฝะธั](#ะฐััะธัะตะบัััะฐ-ัะตัะตะฝะธั)
3. [ะญัะฐะฟ 0: ะะพะดะณะพัะพะฒะบะฐ (ัััะฝะฐั ะฝะฐัััะพะนะบะฐ)](#ััะฐะฟ-0-ะฟะพะดะณะพัะพะฒะบะฐ-ัััะฝะฐั-ะฝะฐัััะพะนะบะฐ)
4. [ะญัะฐะฟ 1: ะะฐัััะพะนะบะฐ RAG ัะธััะตะผั ะธ ะฑัะบะตะฝะดะฐ](#ััะฐะฟ-1-ะฝะฐัััะพะนะบะฐ-rag-ัะธััะตะผั-ะธ-ะฑัะบะตะฝะดะฐ)
5. [ะญัะฐะฟ 2: ะกะบัะธะฟั ะธะฝะดะตะบัะฐัะธะธ ะดะพะบัะผะตะฝัะฐัะธะธ](#ััะฐะฟ-2-ัะบัะธะฟั-ะธะฝะดะตะบัะฐัะธะธ-ะดะพะบัะผะตะฝัะฐัะธะธ)
6. [ะญัะฐะฟ 3: ะะตะฐะปะธะทะฐัะธั ะฟะพะธัะบะฐ ะธ ะพัะฒะตัะพะฒ](#ััะฐะฟ-3-ัะตะฐะปะธะทะฐัะธั-ะฟะพะธัะบะฐ-ะธ-ะพัะฒะตัะพะฒ)
7. [ะญัะฐะฟ 4: ะะฝัะตะณัะฐัะธั ั ะฟะพะธัะบะพะผ ะฒ AppTopbar](#ััะฐะฟ-4-ะธะฝัะตะณัะฐัะธั-ั-ะฟะพะธัะบะพะผ-ะฒ-apptopbar)
8. [ะญัะฐะฟ 5: ะฃะฟัะฐะฒะปะตะฝะธะต ะฐััะธััะตะฝัะฐะผะธ ะฒ ะฐะดะผะธะฝ-ะฟะฐะฝะตะปะธ](#ััะฐะฟ-5-ัะฟัะฐะฒะปะตะฝะธะต-ะฐััะธััะตะฝัะฐะผะธ-ะฒ-ะฐะดะผะธะฝ-ะฟะฐะฝะตะปะธ)
9. [ะญัะฐะฟ 6: ะะฐััะธัะตะฝะธะต ััะฝะบัะธะพะฝะฐะปะฐ](#ััะฐะฟ-6-ัะฐััะธัะตะฝะธะต-ััะฝะบัะธะพะฝะฐะปะฐ)
10. [ะัะฒะตัั ะฝะฐ ะฒะพะฟัะพัั](#ะพัะฒะตัั-ะฝะฐ-ะฒะพะฟัะพัั)

---

## ๐ฏ ะะฑะทะพั ะฟัะพะตะบัะฐ

### ะฆะตะปั

ะะตะฐะปะธะทะพะฒะฐัั AI-ะฐััะธััะตะฝัะฐ, ะบะพัะพััะน:
- ะะพะผะพะณะฐะตั ะฟะพะปัะทะพะฒะฐัะตะปัะผ ะธะทััะฐัั ะฟะปะฐััะพัะผั ัะตัะตะท ะบะพะฝัะตะบััะฝัะต ะฟะพะดัะบะฐะทะบะธ
- ะะฝัะตะณัะธัะพะฒะฐะฝ ั ะพะบะฝะพะผ ะฟะพะธัะบะฐ ะธ ะฟะพะดัััะฐะธะฒะฐะตััั ะฟะพะด ัะตะบัััั ะฒะบะปะฐะดะบั
- ะฃะฟัะฐะฒะปัะตััั ะฐะดะผะธะฝะธัััะฐัะพัะฐะผะธ ัะตัะตะท ะพัะดะตะปัะฝัั ะฒะบะปะฐะดะบั ะฒ ะฐะดะผะธะฝ-ะฟะฐะฝะตะปะธ
- ะัะฟะพะปัะทัะตั **ะพัะดะตะปัะฝัะน API ะบะปัั OpenAI** ะดะปั ะธะทะพะปััะธะธ ะทะฐััะฐั
- ะ ะฑัะดััะตะผ ัะผะพะถะตั ัะพะทะดะฐะฒะฐัั ะฟัะพะตะบัั ะธ ะทะฐะดะฐัะธ ะทะฐ ะฟะพะปัะทะพะฒะฐัะตะปั

### ะัะพะฑะตะฝะฝะพััะธ ะฟะปะฐััะพัะผั

- **Monorepo ััััะบัััะฐ**: `apps/api` (ะฑัะบะตะฝะด), `apps/web` (Next.js ััะพะฝัะตะฝะด)
- **ะะฐะทะฐ ะดะฐะฝะฝัั**: PostgreSQL ัะตัะตะท Drizzle ORM (ะะ SQLite)
- **ะกััะตััะฒัััะฐั AI ะธะฝััะฐััััะบัััะฐ**: OpenAI/Yandex ะบะปะธะตะฝัั, endpoints `/api/ai/*`
- **ะกะธััะตะผะฐ ะฟะพะธัะบะฐ**: `AppTopbar` ั ะฟะพะปะตะผ ะฟะพะธัะบะฐ, `CommandPalette`, `deepSearch.ts`
- **ะะดะผะธะฝ-ะฟะฐะฝะตะปั**: `/admin` ั ะฒะบะปะฐะดะบะฐะผะธ, ัััะฐะฝะธัะฐ `/admin/ai-agents` (ะทะฐะณะปััะบะฐ)
- **ะะพะบัะผะตะฝัะฐัะธั**: `docs/` ั markdown ัะฐะนะปะฐะผะธ
- **Feature flags**: ัะธััะตะผะฐ ัะปะฐะณะพะฒ ะฒ `lib/flags.ts`

---

## ๐๏ธ ะััะธัะตะบัััะฐ ัะตัะตะฝะธั

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ              Frontend (apps/web/)                       โ
โ                                                          โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โ
โ  โ  AppTopbar (ะพะบะฝะพ ะฟะพะธัะบะฐ)                       โ    โ
โ  โ  - ะะฟัะตะดะตะปะตะฝะธะต ัะตะบััะตะน ะฒะบะปะฐะดะบะธ                 โ    โ
โ  โ  - ะะพะฝัะตะบััะฝัะต ะฟะพะดัะบะฐะทะบะธ AI                    โ    โ
โ  โโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โ
โ                 โ                                        โ
โ  โโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โ
โ  โ  AdminPanel (/admin/ai-assistants)             โ    โ
โ  โ  - ะฃะฟัะฐะฒะปะตะฝะธะต ะฐััะธััะตะฝัะฐะผะธ                     โ    โ
โ  โ  - ะะฐัััะพะนะบะฐ API ะบะปััะตะน                        โ    โ
โ  โโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โ
โโโโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                  โ
โโโโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ           API Routes (apps/web/app/api/)                 โ
โ                                                          โ
โ  POST /api/ai-assistant/ask                              โ
โ  POST /api/ai-assistant/suggestions                      โ
โ  POST /api/admin/ai-assistants (CRUD)                    โ
โ  POST /api/admin/ai-assistants/index-docs                โ
โโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                  โ
โโโโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ        AI Services (apps/web/lib/ai-assistant/)          โ
โ                                                          โ
โ  - rag-search.ts (ะฟะพะธัะบ ะฟะพ ะดะพะบัะผะตะฝัะฐัะธะธ)                โ
โ  - assistant-service.ts (ะปะพะณะธะบะฐ ะฐััะธััะตะฝัะฐ)              โ
โ  - context-detector.ts (ะพะฟัะตะดะตะปะตะฝะธะต ะบะพะฝัะตะบััะฐ)           โ
โ  - embeddings.ts (ัะฐะฑะพัะฐ ั OpenAI embeddings)            โ
โโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                  โ
โโโโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ      Vector Store (JSON ัะฐะนะป / PostgreSQL)               โ
โ                                                          โ
โ  - ะะพะบัะผะตะฝัะฐัะธั ะธะท docs/                                 โ
โ  - ะงะฐะฝะบะธ ั embeddings                                    โ
โ  - ะะตัะฐะดะฐะฝะฝัะต (ะธััะพัะฝะธะบ, ัะฐะทะดะตะป)                         โ
โโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                  โ
โโโโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ              OpenAI API (AI_ASSISTANT_API_KEY)           โ
โ                                                          โ
โ  - text-embedding-3-small (embeddings)                   โ
โ  - gpt-5-nano (ัะฐั, ะดะตัะตะฒะฐั ะผะพะดะตะปั)                     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ ะญัะฐะฟ 0: ะะพะดะณะพัะพะฒะบะฐ (ัััะฝะฐั ะฝะฐัััะพะนะบะฐ)

### ะะฐะดะฐัะธ ะดะปั ัะฐะทัะฐะฑะพััะธะบะฐ

1. **ะกะพะทะดะฐัั API ะบะปัั ะดะปั ะฐััะธััะตะฝัะฐ** (ะพัะดะตะปัะฝัะน ะพั ัััะตััะฒัััะตะณะพ)
   - ะัะบัััั https://platform.openai.com/api-keys
   - ะกะพะทะดะฐัั ะฝะพะฒัะน ะบะปัั ัะฟะตัะธะฐะปัะฝะพ ะดะปั ะฐััะธััะตะฝัะฐ (ะฝะฐะฟัะธะผะตั, `sk-proj-...`)
   - ะกะพััะฐะฝะธัั ะบะปัั (ะพะฝ ะฟะพะบะฐะทัะฒะฐะตััั ัะพะปัะบะพ ะพะดะธะฝ ัะฐะท!)

2. **ะะพะฑะฐะฒะธัั ะฟะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั**
   
   ะ ัะฐะนะป `apps/web/.env.local` ะดะพะฑะฐะฒะธัั:
   
   ```bash
   # AI Assistant ะพัะดะตะปัะฝัะน ะบะปัั (ะะ ะบะพะฝัะปะธะบััะตั ั OPENAI_API_KEY)
   AI_ASSISTANT_API_KEY=sk-proj-ะฒะฐั-ะบะปัั-ะดะปั-ะฐััะธััะตะฝัะฐ
   
   # ะะพะดะตะปะธ ะดะปั ะฐััะธััะตะฝัะฐ (ะพะฟัะธะพะฝะฐะปัะฝะพ)
   AI_ASSISTANT_MODEL_CHAT=gpt-5-nano
   AI_ASSISTANT_MODEL_EMBED=text-embedding-3-small
   
   # Feature flag ะดะปั ะฐััะธััะตะฝัะฐ
   NEXT_PUBLIC_FEATURE_AI_ASSISTANT=true
   FEATURE_AI_ASSISTANT=true
   ```

   โ๏ธ **ะะฐะถะฝะพ**: `AI_ASSISTANT_API_KEY` - ััะพ **ะพัะดะตะปัะฝัะน ะบะปัั**, ะฝะต ะบะพะฝัะปะธะบััััะธะน ั ัััะตััะฒัััะธะผ `OPENAI_API_KEY`, ะบะพัะพััะน ะธัะฟะพะปัะทัะตััั ะดะปั ะดััะณะธั AI ััะฝะบัะธะน ะฟะปะฐััะพัะผั.

3. **ะัะพะฒะตัะธัั .gitignore**
   
   ะฃะฑะตะดะธัััั, ััะพ `.env.local` ะฒ `.gitignore`:
   
   ```bash
   # ะ ะบะพัะฝะต ะฟัะพะตะบัะฐ ะธะปะธ apps/web/
   .env.local
   .env*.local
   ```

4. **ะฃััะฐะฝะพะฒะธัั ะทะฐะฒะธัะธะผะพััะธ**
   
   ```bash
   cd apps/web
   pnpm add openai
   ```

---

## ๐ง ะญัะฐะฟ 1: ะะฐัััะพะนะบะฐ RAG ัะธััะตะผั ะธ ะฑัะบะตะฝะดะฐ

### 1.1 ะกะพะทะดะฐัั ััััะบัััั ะฟะฐะฟะพะบ

```
apps/web/
โโโ lib/
โ   โโโ ai-assistant/
โ       โโโ rag-search.ts          # ะะพะธัะบ ะฟะพ ะฒะตะบัะพัะฝะพะน ะะ
โ       โโโ assistant-service.ts   # ะัะฝะพะฒะฝะฐั ะปะพะณะธะบะฐ ะฐััะธััะตะฝัะฐ
โ       โโโ context-detector.ts    # ะะฟัะตะดะตะปะตะฝะธะต ะบะพะฝัะตะบััะฐ ัััะฐะฝะธัั
โ       โโโ embeddings.ts          # ะะฐะฑะพัะฐ ั embeddings
โ       โโโ vector-store.ts        # ะฅัะฐะฝะธะปะธัะต ะฒะตะบัะพัะพะฒ (JSON)
โ       โโโ types.ts               # ะขะธะฟั ะดะปั ะฐััะธััะตะฝัะฐ
โโโ app/
โ   โโโ api/
โ       โโโ ai-assistant/
โ       โ   โโโ ask/route.ts       # ะัะฝะพะฒะฝะพะน endpoint ะดะปั ะฒะพะฟัะพัะพะฒ
โ       โ   โโโ suggestions/route.ts # ะะพะฝัะตะบััะฝัะต ะฟะพะดัะบะฐะทะบะธ
โ       โโโ admin/
โ           โโโ ai-assistants/
โ               โโโ route.ts       # CRUD ะฐััะธััะตะฝัะพะฒ
โ               โโโ index-docs/route.ts # ะะตัะตะธะฝะดะตะบัะฐัะธั
โโโ scripts/
    โโโ index-assistant-docs.ts    # ะกะบัะธะฟั ะธะฝะดะตะบัะฐัะธะธ
```

### 1.2 ะกะพะทะดะฐัั ัะธะฟั

**ะคะฐะนะป:** `apps/web/lib/ai-assistant/types.ts`

```typescript
export interface DocumentationChunk {
  id: string;
  source: string; // ะััั ะบ ัะฐะนะปั
  chunkText: string;
  embedding: number[];
  section?: string; // ะะฐะทะดะตะป ะธะท ะฟััะธ (ะฝะฐะฟัะธะผะตั, 'getting-started')
  metadata?: {
    title?: string;
    lastModified?: string;
  };
}

export interface AssistantConfig {
  id: string;
  name: string;
  description: string;
  apiKey: string; // ะัะดะตะปัะฝัะน ะบะปัั ะดะปั ะฐััะธััะตะฝัะฐ
  modelChat: string;
  modelEmbed: string;
  enabled: boolean;
  createdAt: string;
  updatedAt: string;
}

export interface AssistantQuestion {
  message: string;
  context?: {
    currentPath?: string;
    section?: string;
    userId?: string;
  };
  sessionId?: string;
}

export interface AssistantResponse {
  answer: string;
  sources?: string[]; // ะััะพัะฝะธะบะธ ะดะพะบัะผะตะฝัะฐัะธะธ
  suggestions?: string[]; // ะกะปะตะดัััะธะต ะฒะพะฟัะพัั
}

export interface ContextualSuggestion {
  id: string;
  text: string;
  description?: string;
  icon?: string;
}
```

### 1.3 ะกะพะทะดะฐัั ะผะพะดัะปั ะดะปั ัะฐะฑะพัั ั OpenAI (ะฐััะธััะตะฝั)

**ะคะฐะนะป:** `apps/web/lib/ai-assistant/embeddings.ts`

```typescript
import OpenAI from 'openai';

let assistantOpenAI: OpenAI | null = null;

function getAssistantOpenAIClient(): OpenAI {
  if (!assistantOpenAI) {
    // ะัะฟะพะปัะทัะตะผ ะะขะะะะฌะะซะ ะบะปัั ะดะปั ะฐััะธััะตะฝัะฐ
    const apiKey = process.env.AI_ASSISTANT_API_KEY;
    if (!apiKey) {
      throw new Error(
        'AI_ASSISTANT_API_KEY is not set. Please add it to your .env.local file.\n' +
        'ะญัะพ ะพัะดะตะปัะฝัะน ะบะปัั ะพั OPENAI_API_KEY, ะบะพัะพััะน ะธัะฟะพะปัะทัะตััั ะดะปั ะดััะณะธั AI ััะฝะบัะธะน.'
      );
    }
    assistantOpenAI = new OpenAI({ apiKey });
  }
  return assistantOpenAI;
}

export async function createEmbedding(text: string): Promise<number[]> {
  const client = getAssistantOpenAIClient();
  const model = process.env.AI_ASSISTANT_MODEL_EMBED || 'text-embedding-3-small';
  
  const response = await client.embeddings.create({
    model,
    input: text.trim(),
  });
  
  return response.data[0].embedding;
}

export async function generateChatResponse(
  systemPrompt: string,
  userMessage: string,
  contextChunks: Array<{ text: string; source: string }>
): Promise<string> {
  const client = getAssistantOpenAIClient();
  // ะัะฟะพะปัะทัะตะผ gpt-5-nano ะบะฐะบ ัะบะฐะทะฐะฝะพ (ะตัะปะธ ะผะพะดะตะปั ะฝะตะดะพัััะฟะฝะฐ, ะฑัะดะตั ะพัะธะฑะบะฐ ะพั API)
  const model = process.env.AI_ASSISTANT_MODEL_CHAT || 'gpt-5-nano';
  
  // ะคะพัะผะธััะตะผ ะบะพะฝัะตะบัั ะธะท ะฝะฐะนะดะตะฝะฝัั ัะฐะฝะบะพะฒ
  const contextText = contextChunks
    .map((chunk, idx) => `[ะััะพัะฝะธะบ ${idx + 1}: ${chunk.source}]\n${chunk.text}`)
    .join('\n\n---\n\n');
  
  const messages = [
    {
      role: 'system' as const,
      content: systemPrompt,
    },
    {
      role: 'user' as const,
      content: `ะะพะฝัะตะบัั ะธะท ะดะพะบัะผะตะฝัะฐัะธะธ:\n\n${contextText}\n\n---\n\nะะพะฟัะพั ะฟะพะปัะทะพะฒะฐัะตะปั: ${userMessage}\n\nะัะฒะตัั ะบัะฐัะบะพ (2-4 ะฟัะตะดะปะพะถะตะฝะธั) ะฝะฐ ะพัะฝะพะฒะต ะฟัะตะดะพััะฐะฒะปะตะฝะฝะพะน ะดะพะบัะผะตะฝัะฐัะธะธ. ะัะปะธ ะพัะฒะตัะฐ ะฝะตั ะฒ ะดะพะบัะผะตะฝัะฐัะธะธ, ัะตััะฝะพ ัะบะฐะถะธ ะพะฑ ััะพะผ.`,
    },
  ];
  
  const response = await client.chat.completions.create({
    model,
    messages,
    temperature: 0.7,
    max_tokens: 300, // ะะณัะฐะฝะธัะตะฝะธะต ะดะปั ะบัะฐัะบะพััะธ
  });
  
  return response.choices[0]?.message?.content || 'ะะทะฒะธะฝะธัะต, ะฝะต ัะดะฐะปะพัั ััะพัะผะธัะพะฒะฐัั ะพัะฒะตั.';
}
```

### 1.4 ะกะพะทะดะฐัั ะฒะตะบัะพัะฝะพะต ััะฐะฝะธะปะธัะต (JSON ัะฐะนะป)

**ะะฐะถะฝะพ**: ะะพัะบะพะปัะบั ะพัะฝะพะฒะฝะฐั ะะ - PostgreSQL, ะฐ ะฝะต SQLite, ะผั ะธัะฟะพะปัะทัะตะผ JSON ัะฐะนะป ะดะปั ะฟัะพััะพัั. ะ ะฑัะดััะตะผ ะผะพะถะฝะพ ะผะธะณัะธัะพะฒะฐัั ะฝะฐ PostgreSQL ั ัะฐััะธัะตะฝะธะตะผ pgvector.

**ะคะฐะนะป:** `apps/web/lib/ai-assistant/vector-store.ts`

```typescript
import { existsSync, mkdirSync, readFileSync, writeFileSync } from 'fs';
import { join } from 'path';
import type { DocumentationChunk } from './types';

const STORE_DIR = join(process.cwd(), '.ai-assistant');
const STORE_FILE = join(STORE_DIR, 'chunks.json');

// ะฃะฑะตะดะธัััั, ััะพ ะดะธัะตะบัะพัะธั ัััะตััะฒัะตั
if (!existsSync(STORE_DIR)) {
  mkdirSync(STORE_DIR, { recursive: true });
}

interface ChunkStore {
  chunks: DocumentationChunk[];
  indexedAt: string;
  version: number;
}

function loadStore(): ChunkStore {
  if (!existsSync(STORE_FILE)) {
    return {
      chunks: [],
      indexedAt: new Date().toISOString(),
      version: 1,
    };
  }
  
  try {
    const content = readFileSync(STORE_FILE, 'utf-8');
    return JSON.parse(content) as ChunkStore;
  } catch (error) {
    console.error('Failed to load vector store:', error);
    return {
      chunks: [],
      indexedAt: new Date().toISOString(),
      version: 1,
    };
  }
}

function saveStore(store: ChunkStore): void {
  try {
    writeFileSync(STORE_FILE, JSON.stringify(store, null, 2), 'utf-8');
  } catch (error) {
    console.error('Failed to save vector store:', error);
    throw error;
  }
}

export function saveChunk(chunk: DocumentationChunk): void {
  const store = loadStore();
  
  // ะฃะดะฐะปัะตะผ ัััะตััะฒัััะธะน ัะฐะฝะบ ั ัะฐะบะธะผ ะถะต ID (upsert)
  store.chunks = store.chunks.filter(c => c.id !== chunk.id);
  
  // ะะพะฑะฐะฒะปัะตะผ ะฝะพะฒัะน
  store.chunks.push(chunk);
  store.indexedAt = new Date().toISOString();
  
  saveStore(store);
}

export function getAllChunks(): DocumentationChunk[] {
  const store = loadStore();
  return store.chunks;
}

export function clearAllChunks(): void {
  const store: ChunkStore = {
    chunks: [],
    indexedAt: new Date().toISOString(),
    version: 1,
  };
  saveStore(store);
}

export function getChunksBySection(section: string): DocumentationChunk[] {
  const store = loadStore();
  return store.chunks.filter(chunk => chunk.section === section);
}

export function getStoreStats(): { totalChunks: number; indexedAt: string } {
  const store = loadStore();
  return {
    totalChunks: store.chunks.length,
    indexedAt: store.indexedAt,
  };
}
```

### 1.5 ะะพะฑะฐะฒะธัั .ai-assistant ะฒ .gitignore

**ะคะฐะนะป:** `.gitignore` (ะฒ ะบะพัะฝะต ะฟัะพะตะบัะฐ ะธะปะธ `apps/web/.gitignore`)

ะะพะฑะฐะฒะธัั:
```
.ai-assistant/
```

---

## ๐ ะญัะฐะฟ 2: ะกะบัะธะฟั ะธะฝะดะตะบัะฐัะธะธ ะดะพะบัะผะตะฝัะฐัะธะธ

### 2.1 ะกะพะทะดะฐัั ัะบัะธะฟั ะธะฝะดะตะบัะฐัะธะธ

**ะคะฐะนะป:** `apps/web/scripts/index-assistant-docs.ts`

```typescript
#!/usr/bin/env ts-node

import { readdirSync, readFileSync, statSync, existsSync } from 'fs';
import { join, extname, relative } from 'path';
import { createEmbedding } from '../lib/ai-assistant/embeddings';
import { saveChunk, clearAllChunks, getAllChunks, getStoreStats } from '../lib/ai-assistant/vector-store';
import { createHash } from 'crypto';

const DOCS_DIR = join(process.cwd(), '..', '..', 'docs');
const CHUNK_SIZE = 800; // ะกะธะผะฒะพะปะพะฒ ะฝะฐ ัะฐะฝะบ
const CHUNK_OVERLAP = 100; // ะะตัะตะบัััะธะต ะผะตะถะดั ัะฐะฝะบะฐะผะธ

function extractSection(filePath: string): string | undefined {
  const relPath = relative(DOCS_DIR, filePath);
  const parts = relPath.split('/');
  
  // ะะทะฒะปะตะบะฐะตะผ ะฟะตัะฒัั ัะฐััั ะฟััะธ ะบะฐะบ ัะฐะทะดะตะป
  if (parts.length > 1 && parts[0] !== 'docs') {
    return parts[0];
  }
  return undefined;
}

function splitIntoChunks(text: string, chunkSize: number, overlap: number): string[] {
  const chunks: string[] = [];
  let start = 0;
  
  while (start < text.length) {
    const end = Math.min(start + chunkSize, text.length);
    chunks.push(text.slice(start, end).trim());
    start = end - overlap;
  }
  
  return chunks.filter(chunk => chunk.length > 50); // ะะณะฝะพัะธััะตะผ ัะปะธัะบะพะผ ะบะพัะพัะบะธะต
}

async function indexFile(filePath: string): Promise<void> {
  const content = readFileSync(filePath, 'utf-8');
  
  // ะัะพััะพะน ะฟะฐััะธะฝะณ markdown: ัะดะฐะปัะตะผ markdown ัะธะฝัะฐะบัะธั ะดะปั ัะธััะพะณะพ ัะตะบััะฐ
  const cleanText = content
    .replace(/^#+\s+/gm, '') // ะะฐะณะพะปะพะฒะบะธ
    .replace(/\[([^\]]+)\]\([^\)]+\)/g, '$1') // ะกััะปะบะธ
    .replace(/`([^`]+)`/g, '$1') // ะะฝะปะฐะนะฝ ะบะพะด
    .replace(/```[\s\S]*?```/g, '') // ะะปะพะบะธ ะบะพะดะฐ
    .replace(/\*\*([^\*]+)\*\*/g, '$1') // ะะธัะฝัะน ัะตะบัั
    .replace(/\*([^\*]+)\*/g, '$1') // ะัััะธะฒ
    .trim();
  
  if (cleanText.length < 100) {
    console.log(`โญ๏ธ  ะัะพะฟััะตะฝ ${filePath} (ัะปะธัะบะพะผ ะบะพัะพัะบะธะน)`);
    return;
  }
  
  const section = extractSection(filePath);
  const chunks = splitIntoChunks(cleanText, CHUNK_SIZE, CHUNK_OVERLAP);
  
  console.log(`๐ ะะฝะดะตะบัะธััั ${filePath} (${chunks.length} ัะฐะฝะบะพะฒ, ัะฐะทะดะตะป: ${section || 'none'})`);
  
  for (let i = 0; i < chunks.length; i++) {
    const chunkText = chunks[i];
    const chunkId = createHash('sha256')
      .update(filePath + '|' + i)
      .digest('hex');
    
    try {
      const embedding = await createEmbedding(chunkText);
      
      saveChunk({
        id: chunkId,
        source: relative(process.cwd(), filePath),
        chunkText,
        embedding,
        section,
        metadata: {
          title: filePath.split('/').pop()?.replace(extname(filePath), ''),
        },
      });
      
      // ะะตะฑะพะปััะฐั ะทะฐะดะตัะถะบะฐ ััะพะฑั ะฝะต ะฟัะตะฒััะธัั rate limits
      if ((i + 1) % 10 === 0) {
        await new Promise(resolve => setTimeout(resolve, 1000));
      }
    } catch (error) {
      console.error(`โ ะัะธะฑะบะฐ ะฟัะธ ะธะฝะดะตะบัะฐัะธะธ ัะฐะฝะบะฐ ${i} ะธะท ${filePath}:`, error);
    }
  }
}

async function indexDirectory(dir: string): Promise<void> {
  const entries = readdirSync(dir, { withFileTypes: true });
  
  for (const entry of entries) {
    const fullPath = join(dir, entry.name);
    
    // ะัะพะฟััะบะฐะตะผ ัะบััััะต ัะฐะนะปั ะธ node_modules
    if (entry.name.startsWith('.') || entry.name === 'node_modules') {
      continue;
    }
    
    if (entry.isDirectory()) {
      await indexDirectory(fullPath);
    } else if (entry.isFile() && ['.md', '.txt'].includes(extname(entry.name))) {
      await indexFile(fullPath);
    }
  }
}

async function main() {
  console.log('๐ ะะฐัะธะฝะฐั ะธะฝะดะตะบัะฐัะธั ะดะพะบัะผะตะฝัะฐัะธะธ...\n');
  
  if (!existsSync(DOCS_DIR)) {
    console.error(`โ ะะธัะตะบัะพัะธั ${DOCS_DIR} ะฝะต ะฝะฐะนะดะตะฝะฐ!`);
    process.exit(1);
  }
  
  // ะัะธัะฐะตะผ ััะฐััะต ะดะฐะฝะฝัะต (ะพะฟัะธะพะฝะฐะปัะฝะพ, ะผะพะถะฝะพ ัะดะตะปะฐัั upsert)
  console.log('๐งน ะัะธัะฐั ััะฐััะต ะดะฐะฝะฝัะต...');
  clearAllChunks();
  
  // ะะฝะดะตะบัะธััะตะผ
  await indexDirectory(DOCS_DIR);
  
  // ะัะพะฒะตััะตะผ ัะตะทัะปััะฐั
  const stats = getStoreStats();
  console.log(`\nโ ะะฝะดะตะบัะฐัะธั ะทะฐะฒะตััะตะฝะฐ! ะัะตะณะพ ัะฐะฝะบะพะฒ: ${stats.totalChunks}`);
  console.log(`๐ ะะฐัะฐ ะธะฝะดะตะบัะฐัะธะธ: ${stats.indexedAt}`);
}

// ะะฐะฟััะบ
main().catch(console.error);
```

### 2.2 ะะพะฑะฐะฒะธัั ัะบัะธะฟั ะฒ package.json

**ะคะฐะนะป:** `apps/web/package.json`

ะะพะฑะฐะฒะธัั ะฒ ัะตะบัะธั `scripts`:

```json
{
  "scripts": {
    "index-assistant-docs": "ts-node scripts/index-assistant-docs.ts"
  }
}
```

---

## ๐ ะญัะฐะฟ 3: ะะตะฐะปะธะทะฐัะธั ะฟะพะธัะบะฐ ะธ ะพัะฒะตัะพะฒ

### 3.1 ะกะพะทะดะฐัั ะผะพะดัะปั ะฟะพะธัะบะฐ ะฟะพ ะฒะตะบัะพัะฝะพะน ะะ

**ะคะฐะนะป:** `apps/web/lib/ai-assistant/rag-search.ts`

```typescript
import { getAllChunks, getChunksBySection } from './vector-store';
import { createEmbedding } from './embeddings';
import type { DocumentationChunk } from './types';

function cosineSimilarity(a: number[], b: number[]): number {
  if (a.length !== b.length) return 0;
  
  let dotProduct = 0;
  let normA = 0;
  let normB = 0;
  
  for (let i = 0; i < a.length; i++) {
    dotProduct += a[i] * b[i];
    normA += a[i] * a[i];
    normB += b[i] * b[i];
  }
  
  return dotProduct / (Math.sqrt(normA) * Math.sqrt(normB));
}

export async function findRelevantChunks(
  question: string,
  section?: string,
  topK: number = 5
): Promise<Array<{ chunk: DocumentationChunk; similarity: number }>> {
  const questionEmbedding = await createEmbedding(question);
  
  // ะะพะปััะฐะตะผ ัะฐะฝะบะธ: ะปะธะฑะพ ะธะท ะบะพะฝะบัะตัะฝะพะณะพ ัะฐะทะดะตะปะฐ, ะปะธะฑะพ ะฒัะต
  const allChunks = section
    ? getChunksBySection(section)
    : getAllChunks();
  
  // ะััะธัะปัะตะผ ััะพะถะตััั
  const withSimilarity = allChunks.map(chunk => ({
    chunk,
    similarity: cosineSimilarity(questionEmbedding, chunk.embedding),
  }));
  
  // ะกะพััะธััะตะผ ะธ ะฑะตัะตะผ ัะพะฟ
  return withSimilarity
    .sort((a, b) => b.similarity - a.similarity)
    .slice(0, topK)
    .filter(item => item.similarity > 0.3); // ะะธะฝะธะผะฐะปัะฝัะน ะฟะพัะพะณ ััะพะถะตััะธ
}
```

### 3.2 ะกะพะทะดะฐัั ะพัะฝะพะฒะฝะพะน ัะตัะฒะธั ะฐััะธััะตะฝัะฐ

**ะคะฐะนะป:** `apps/web/lib/ai-assistant/assistant-service.ts`

```typescript
import { findRelevantChunks } from './rag-search';
import { generateChatResponse } from './embeddings';
import type { AssistantQuestion, AssistantResponse } from './types';

const SYSTEM_PROMPT = `ะขั - ะฟะพะปะตะทะฝัะน AI-ะฐััะธััะตะฝั ะฟะปะฐััะพัะผั Collabverse. 
ะขะฒะพั ะทะฐะดะฐัะฐ - ะฟะพะผะพะณะฐัั ะฟะพะปัะทะพะฒะฐัะตะปัะผ ะฟะพะฝะธะผะฐัั, ะบะฐะบ ะธัะฟะพะปัะทะพะฒะฐัั ะฟะปะฐััะพัะผั.

ะัะฐะฒะธะปะฐ:
- ะัะฒะตัะฐะน ะบัะฐัะบะพ (2-4 ะฟัะตะดะปะพะถะตะฝะธั)
- ะัะฟะพะปัะทัะน ัะพะปัะบะพ ะธะฝัะพัะผะฐัะธั ะธะท ะฟัะตะดะพััะฐะฒะปะตะฝะฝะพะน ะดะพะบัะผะตะฝัะฐัะธะธ
- ะัะปะธ ะพัะฒะตัะฐ ะฝะตั ะฒ ะดะพะบัะผะตะฝัะฐัะธะธ, ัะตััะฝะพ ัะบะฐะถะธ ะพะฑ ััะพะผ
- ะะธัะธ ะดััะถะตะปัะฑะฝะพ ะธ ะฟะพ-ััััะบะธ
- ะัะตะดะปะฐะณะฐะน ะบะพะฝะบัะตัะฝัะต ะดะตะนััะฒะธั, ะบะพะณะดะฐ ััะพ ะฒะพะทะผะพะถะฝะพ`;

export async function answerQuestion(
  question: AssistantQuestion
): Promise<AssistantResponse> {
  // ะะฐัะพะดะธะผ ัะตะปะตะฒะฐะฝัะฝัะต ัะฐะฝะบะธ
  const relevantChunks = await findRelevantChunks(
    question.message,
    question.context?.section,
    5
  );
  
  if (relevantChunks.length === 0) {
    return {
      answer: 'ะ ัะพะถะฐะปะตะฝะธั, ั ะฝะต ะฝะฐัะตะป ัะตะปะตะฒะฐะฝัะฝะพะน ะธะฝัะพัะผะฐัะธะธ ะฒ ะดะพะบัะผะตะฝัะฐัะธะธ. ะะพะฟัะพะฑัะนัะต ะฟะตัะตัะพัะผัะปะธัะพะฒะฐัั ะฒะพะฟัะพั ะธะปะธ ะพะฑัะฐัะธัะตัั ะฒ ะฟะพะดะดะตัะถะบั.',
      sources: [],
    };
  }
  
  // ะคะพัะผะธััะตะผ ะบะพะฝัะตะบัั ะดะปั LLM
  const contextChunks = relevantChunks.map(item => ({
    text: item.chunk.chunkText,
    source: item.chunk.source,
  }));
  
  // ะะตะฝะตัะธััะตะผ ะพัะฒะตั
  const answer = await generateChatResponse(
    SYSTEM_PROMPT,
    question.message,
    contextChunks
  );
  
  // ะะทะฒะปะตะบะฐะตะผ ัะฝะธะบะฐะปัะฝัะต ะธััะพัะฝะธะบะธ
  const sources = Array.from(
    new Set(contextChunks.map(chunk => chunk.source))
  );
  
  return {
    answer,
    sources,
  };
}
```

### 3.3 ะกะพะทะดะฐัั API endpoint ะดะปั ะฒะพะฟัะพัะพะฒ

**ะคะฐะนะป:** `apps/web/app/api/ai-assistant/ask/route.ts`

```typescript
import { NextRequest, NextResponse } from 'next/server';
import { answerQuestion } from '@/lib/ai-assistant/assistant-service';
import { flags } from '@/lib/flags';

export async function POST(req: NextRequest) {
  // ะัะพะฒะตัะบะฐ feature flag
  if (!flags.AI_ASSISTANT) {
    return NextResponse.json(
      { error: 'AI Assistant is not enabled' },
      { status: 403 }
    );
  }
  
  try {
    const body = await req.json();
    const { message, context, sessionId } = body;
    
    if (!message || typeof message !== 'string' || message.trim().length === 0) {
      return NextResponse.json(
        { error: 'Message is required' },
        { status: 400 }
      );
    }
    
    const response = await answerQuestion({
      message: message.trim(),
      context,
      sessionId,
    });
    
    return NextResponse.json(response);
  } catch (error) {
    console.error('AI Assistant error:', error);
    return NextResponse.json(
      { error: 'Failed to process question' },
      { status: 500 }
    );
  }
}
```

---

## ๐ ะญัะฐะฟ 4: ะะฝัะตะณัะฐัะธั ั ะฟะพะธัะบะพะผ ะฒ AppTopbar

### 4.1 ะกะพะทะดะฐัั ะผะพะดัะปั ะพะฟัะตะดะตะปะตะฝะธั ะบะพะฝัะตะบััะฐ

**ะคะฐะนะป:** `apps/web/lib/ai-assistant/context-detector.ts`

```typescript
export interface PageContext {
  section?: string;
  page?: string;
  suggestions: string[];
}

const SECTION_MAPPING: Record<string, string> = {
  '/pm': 'projects',
  '/finance': 'finance',
  '/docs': 'docs',
  '/community': 'community',
  '/market': 'marketplace',
  '/org': 'organization',
  '/admin': 'admin',
  '/support': 'support',
};

const CONTEXTUAL_SUGGESTIONS: Record<string, string[]> = {
  projects: [
    'ะะฐะบ ัะพะทะดะฐัั ะฝะพะฒัะน ะฟัะพะตะบั?',
    'ะะฐะบ ะดะพะฑะฐะฒะธัั ะทะฐะดะฐัั ะฒ ะฟัะพะตะบั?',
    'ะะฐะบ ะฝะฐะทะฝะฐัะธัั ะธัะฟะพะปะฝะธัะตะปั?',
  ],
  finance: [
    'ะะฐะบ ะดะพะฑะฐะฒะธัั ัะฐััะพะด?',
    'ะะฐะบ ัะพะทะดะฐัั ัััั?',
    'ะะฐะบ ะฝะฐัััะพะธัั ะฑัะดะถะตั ะฟัะพะตะบัะฐ?',
  ],
  docs: [
    'ะะฐะบ ะทะฐะณััะทะธัั ะดะพะบัะผะตะฝั?',
    'ะะฐะบ ะฟะพะดะตะปะธัััั ะดะพะบัะผะตะฝัะพะผ?',
    'ะะดะต ะฝะฐะนัะธ ะฑัะตะฝะด-ัะตะฟะพะทะธัะพัะธะน?',
  ],
  community: [
    'ะะฐะบ ัะพะทะดะฐัั ัะพะฑััะธะต?',
    'ะะฐะบ ะฟัะธัะพะตะดะธะฝะธัััั ะบ ะบะพะผะฝะฐัะต?',
    'ะะฐะบ ัะฐะฑะพัะฐะตั ัะตะนัะธะฝะณ?',
  ],
  // ... ะพััะฐะปัะฝัะต ัะฐะทะดะตะปั
};

export function detectContext(pathname: string): PageContext {
  // ะะฟัะตะดะตะปัะตะผ ัะฐะทะดะตะป
  let section: string | undefined;
  for (const [pathPrefix, sectionName] of Object.entries(SECTION_MAPPING)) {
    if (pathname.startsWith(pathPrefix)) {
      section = sectionName;
      break;
    }
  }
  
  // ะะพะปััะฐะตะผ ะบะพะฝัะตะบััะฝัะต ะฟะพะดัะบะฐะทะบะธ
  const suggestions = section
    ? CONTEXTUAL_SUGGESTIONS[section] || []
    : [
        'ะะฐะบ ะฝะฐัะฐัั ัะฐะฑะพัั ั ะฟะปะฐััะพัะผะพะน?',
        'ะะดะต ะฝะฐะนัะธ ะดะพะบัะผะตะฝัะฐัะธั?',
        'ะะฐะบ ะฟะพะปััะธัั ะฟะพะผะพัั?',
      ];
  
  return {
    section,
    page: pathname,
    suggestions,
  };
}
```

### 4.2 ะกะพะทะดะฐัั endpoint ะดะปั ะบะพะฝัะตะบััะฝัั ะฟะพะดัะบะฐะทะพะบ

**ะคะฐะนะป:** `apps/web/app/api/ai-assistant/suggestions/route.ts`

```typescript
import { NextRequest, NextResponse } from 'next/server';
import { detectContext } from '@/lib/ai-assistant/context-detector';
import { flags } from '@/lib/flags';

export async function GET(req: NextRequest) {
  if (!flags.AI_ASSISTANT) {
    return NextResponse.json({ suggestions: [] });
  }
  
  const pathname = req.nextUrl.searchParams.get('pathname') || '/';
  const context = detectContext(pathname);
  
  return NextResponse.json({
    suggestions: context.suggestions.map((text, index) => ({
      id: `suggestion-${index}`,
      text,
    })),
    section: context.section,
  });
}
```

### 4.3 ะะฑะฝะพะฒะธัั AppTopbar ะดะปั ะธะฝัะตะณัะฐัะธะธ

**ะคะฐะนะป:** `apps/web/components/app/AppTopbar.tsx`

ะะพะฑะฐะฒะธัั ะธะฝัะตะณัะฐัะธั ั AI ะฐััะธััะตะฝัะพะผ (ะฟัะธะผะตั ะบะพะดะฐ ัะผ. ะฒ ัะฐะทะดะตะปะต "ะะฝัะตะณัะฐัะธั ั UI").

### 4.4 ะะพะฑะฐะฒะธัั feature flag

**ะคะฐะนะป:** `apps/web/lib/flags.ts`

ะะพะฑะฐะฒะธัั:
```typescript
AI_ASSISTANT: resolveLegacyBooleanFlag(['NEXT_PUBLIC_FEATURE_AI_ASSISTANT', 'FEATURE_AI_ASSISTANT']),
```

---

## โ๏ธ ะญัะฐะฟ 5: ะฃะฟัะฐะฒะปะตะฝะธะต ะฐััะธััะตะฝัะฐะผะธ ะฒ ะฐะดะผะธะฝ-ะฟะฐะฝะตะปะธ

### 5.1 ะะฑะฝะพะฒะธัั ัััะฐะฝะธัั ะฐะดะผะธะฝ-ะฟะฐะฝะตะปะธ

**ะคะฐะนะป:** `apps/web/app/(app)/admin/ai-agents/page.tsx`

ะะตะฐะปะธะทะพะฒะฐัั ะฟะพะปะฝะพัะตะฝะฝะพะต ัะฟัะฐะฒะปะตะฝะธะต ะฐััะธััะตะฝัะฐะผะธ (CRUD ะพะฟะตัะฐัะธะธ, ะฝะฐัััะพะนะบะฐ API ะบะปััะตะน, ะฟะตัะตะธะฝะดะตะบัะฐัะธั ะดะพะบัะผะตะฝัะฐัะธะธ).

### 5.2 ะะพะฑะฐะฒะธัั API endpoints ะดะปั ะฐะดะผะธะฝะฐ

**ะคะฐะนะป:** `apps/web/app/api/admin/ai-assistants/route.ts`

ะกะพะทะดะฐัั endpoints ะดะปั:
- `GET /api/admin/ai-assistants` - ัะฟะธัะพะบ ะฐััะธััะตะฝัะพะฒ
- `POST /api/admin/ai-assistants` - ัะพะทะดะฐะฝะธะต/ะพะฑะฝะพะฒะปะตะฝะธะต
- `DELETE /api/admin/ai-assistants/:id` - ัะดะฐะปะตะฝะธะต
- `POST /api/admin/ai-assistants/index-docs` - ะทะฐะฟััะบ ะฟะตัะตะธะฝะดะตะบัะฐัะธะธ

---

## ๐ ะญัะฐะฟ 6: ะะฐััะธัะตะฝะธะต ััะฝะบัะธะพะฝะฐะปะฐ

### ะะปะฐะฝั ะฝะฐ ะฑัะดััะตะต

1. **ะกะพะทะดะฐะฝะธะต ะฟัะพะตะบัะพะฒ ัะตัะตะท AI**
   - ะะฝัะตะณัะฐัะธั ั `/api/pm/projects`
   - ะะตะฝะตัะฐัะธั ััััะบัััั ะฟัะพะตะบัะฐ ะฝะฐ ะพัะฝะพะฒะต ะพะฟะธัะฐะฝะธั

2. **ะกะพะทะดะฐะฝะธะต ะทะฐะดะฐั ัะตัะตะท AI**
   - ะะฝัะตะณัะฐัะธั ั `/api/pm/tasks`
   - ะะฒัะพะผะฐัะธัะตัะบะพะต ัะฐะทะฑะธะตะฝะธะต ะฝะฐ ะฟะพะดะทะฐะดะฐัะธ

3. **ะฃะปัััะตะฝะธั UX**
   - ะััะพัะธั ะดะธะฐะปะพะณะพะฒ
   - ะะทะฑัะฐะฝะฝัะต ะพัะฒะตัั
   - ะะฑัะฐัะฝะฐั ัะฒัะทั (๐/๐)

---

## โ ะัะฒะตัั ะฝะฐ ะฒะพะฟัะพัั

### 1. ะฃ ะฝะฐั ะฝะฐ ะฟะปะฐััะพัะผะต ัะตะฐะปะธะทะพะฒะฐะฝะพ ััะฐะฝะตะฝะธะต ะธะผะตะฝะฝะพ SQLite?

**ะัะฒะตั**: ะะตั, ะฝะฐ ะฟะปะฐััะพัะผะต ะธัะฟะพะปัะทัะตััั **PostgreSQL** ัะตัะตะท Drizzle ORM. ะ ะฟะปะฐะฝะต ะธัะฟะพะปัะทัะตััั **JSON ัะฐะนะป** ะดะปั ะฒะตะบัะพัะฝะพะณะพ ััะฐะฝะธะปะธัะฐ ะฟะพ ัะปะตะดัััะธะผ ะฟัะธัะธะฝะฐะผ:

- **ะัะพััะพัะฐ**: ะะต ััะตะฑัะตั ะฝะฐัััะพะนะบะธ ัะฐััะธัะตะฝะธะน PostgreSQL (pgvector)
- **ะะทะพะปััะธั**: ะะฐะฝะฝัะต ะฒะตะบัะพัะพะฒ ััะฐะฝัััั ะพัะดะตะปัะฝะพ ะพั ะพัะฝะพะฒะฝะพะน ะะ
- **ะะพััะฐัะธะฒะฝะพััั**: ะะตะณะบะพ ะฑัะบะฐะฟะธัั ะธ ะฟะตัะตะผะตัะฐัั
- **ะัััััะน ััะฐัั**: ะะพะถะฝะพ ะฝะฐัะฐัั ัะฐะฑะพัะฐัั ััะฐะทั ะฑะตะท ะผะธะณัะฐัะธะน

ะ ะฑัะดััะตะผ ะผะพะถะฝะพ ะผะธะณัะธัะพะฒะฐัั ะฝะฐ PostgreSQL ั ัะฐััะธัะตะฝะธะตะผ `pgvector` ะดะปั ะปัััะตะน ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ ะธ ะผะฐัััะฐะฑะธััะตะผะพััะธ.

### 2. ะ ะบะฐัะตััะฒะต ะผะพะดะตะปะธ ั ะฑัะดั ะธัะฟะพะปัะทะพะฒะฐัั gpt-5-nano

**ะัะฒะตั**: ะะฑะฝะพะฒะปะตะฝะพ ะฒ ะฟะปะฐะฝะต. ะัะฟะพะปัะทัะตััั `gpt-5-nano` ะบะฐะบ ัะบะฐะทะฐะฝะพ:

```typescript
const model = process.env.AI_ASSISTANT_MODEL_CHAT || 'gpt-5-nano';
```

**ะัะธะผะตัะฐะฝะธะต**: ะัะปะธ ะผะพะดะตะปั `gpt-5-nano` ะตัั ะฝะตะดะพัััะฟะฝะฐ ะฒ OpenAI API, ะผะพะถะฝะพ ะฒัะตะผะตะฝะฝะพ ะธัะฟะพะปัะทะพะฒะฐัั `gpt-4o-mini` ะธะปะธ ะดััะณัั ะดะพัััะฟะฝัั ะผะพะดะตะปั, ะธะทะผะตะฝะธะฒ ะทะฝะฐัะตะฝะธะต ะฒ `.env.local`:

```bash
AI_ASSISTANT_MODEL_CHAT=gpt-4o-mini  # ะัะตะผะตะฝะฝะพ, ะตัะปะธ gpt-5-nano ะฝะตะดะพัััะฟะฝะฐ
```

### 3. OPENAI_API_KEY ะฝะต ะฑัะดัั ะบะพะฝัะปะธะบัะพะฒะฐัั ะผะตะถะดั ัะพะฑะพะน?

**ะัะฒะตั**: ะะตั ะบะพะฝัะปะธะบัะพะฒ. ะ ะฟะปะฐะฝะต ะธัะฟะพะปัะทัะตััั **ะพัะดะตะปัะฝัะน ะบะปัั** `AI_ASSISTANT_API_KEY`:

- **ะกััะตััะฒัััะธะน ะบะปัั** (`OPENAI_API_KEY`) ะธัะฟะพะปัะทัะตััั ะดะปั ะดััะณะธั AI ััะฝะบัะธะน:
  - ะะตะฝะตัะฐัะธั ะพะฟะธัะฐะฝะธั ะทะฐะดะฐั (`/api/ai/generate-description`)
  - ะะตะฝะตัะฐัะธั ะฟะพะดะทะฐะดะฐั (`/api/ai/generate-subtasks`)
  - ะกัะผะผะธัะพะฒะฐะฝะธะต ะบะพะผะผะตะฝัะฐัะธะตะฒ (`/api/ai/summarize-comments`)
  - ะ ะดััะณะธะต AI ััะฝะบัะธะธ ะฒ `lib/ai/client.ts`

- **ะะพะฒัะน ะบะปัั** (`AI_ASSISTANT_API_KEY`) ะธัะฟะพะปัะทัะตััั **ัะพะปัะบะพ** ะดะปั:
  - AI ะฐััะธััะตะฝัะฐ ะธะทััะตะฝะธั ะฟะปะฐััะพัะผั
  - ะะฝะดะตะบัะฐัะธะธ ะดะพะบัะผะตะฝัะฐัะธะธ
  - ะัะฒะตัะพะฒ ะฝะฐ ะฒะพะฟัะพัั ะฟะพะปัะทะพะฒะฐัะตะปะตะน

ะญัะพ ะฟะพะทะฒะพะปัะตั:
- โ ะัะดะตะปัะฝะพ ะพััะปะตะถะธะฒะฐัั ะทะฐััะฐัั ะฝะฐ ะฐััะธััะตะฝัะฐ
- โ ะฃะฟัะฐะฒะปััั ะดะพัััะฟะพะผ ะฝะตะทะฐะฒะธัะธะผะพ
- โ ะะต ะบะพะฝัะปะธะบัะพะฒะฐัั ั ัััะตััะฒัััะธะผ ััะฝะบัะธะพะฝะฐะปะพะผ
- โ ะัะฟะพะปัะทะพะฒะฐัั ัะฐะทะฝัะต ะผะพะดะตะปะธ ะธ ะปะธะผะธัั ะดะปั ัะฐะทะฝัั ัะตะปะตะน

---

## โ๏ธ ะะทะฒะตััะฝัะต ะพะณัะฐะฝะธัะตะฝะธั ะธ ะฑัะดััะธะต ัะปัััะตะฝะธั

### ะขะตะบััะธะต ะพะณัะฐะฝะธัะตะฝะธั

1. **JSON ัะฐะนะป ะดะปั ะฒะตะบัะพัะพะฒ**: ะะพะดัะพะดะธั ะดะปั ะฝะตะฑะพะปััะธั ะพะฑััะผะพะฒ. ะะปั ะฟัะพะดะฐะบัะตะฝะฐ ัะฐััะผะพััะตัั PostgreSQL ั pgvector ะธะปะธ ัะฟะตัะธะฐะปะธะทะธัะพะฒะฐะฝะฝัะต ัะตัะตะฝะธั (Pinecone, Weaviate, Qdrant).

2. **ะะฐะทะพะฒัะน ะฟะฐััะธะฝะณ Markdown**: ะขะตะบััะฐั ัะตะฐะปะธะทะฐัะธั ัะดะฐะปัะตั ัะพัะผะฐัะธัะพะฒะฐะฝะธะต. ะะพะถะฝะพ ัะปัััะธัั ั ะฟะพะผะพััั ะฑะธะฑะปะธะพัะตะบ ัะธะฟะฐ `remark`.

3. **ะะตั ะบััะธัะพะฒะฐะฝะธั**: ะะฐะถะดัะน ะทะฐะฟัะพั ะฒัะทัะฒะฐะตั OpenAI API. ะะพะฑะฐะฒะธัั ะบัั ะดะปั ัะฐัััั ะฒะพะฟัะพัะพะฒ.

4. **ะััััััะฒะธะต ะผะพะฝะธัะพัะธะฝะณะฐ**: ะะตั ะปะพะณะธัะพะฒะฐะฝะธั ะธัะฟะพะปัะทะพะฒะฐะฝะธั ะธ ะทะฐััะฐั. ะะพะฑะฐะฒะธัั analytics.

### ะะตะบะพะผะตะฝะดะฐัะธะธ ะฟะพ ัะปัััะตะฝะธั

1. **Rate limiting**: ะะณัะฐะฝะธัะธัั ะบะพะปะธัะตััะฒะพ ะทะฐะฟัะพัะพะฒ ะฝะฐ ะฟะพะปัะทะพะฒะฐัะตะปั
2. **Cost tracking**: ะััะปะตะถะธะฒะฐัั ะทะฐััะฐัั ะฝะฐ API
3. **A/B ัะตััะธัะพะฒะฐะฝะธะต**: ะขะตััะธัะพะฒะฐัั ัะฐะทะฝัะต ะผะพะดะตะปะธ ะธ ะฟัะพะผะฟัั
4. **Feedback loop**: ะกะพะฑะธัะฐัั ะพะฑัะฐัะฝัั ัะฒัะทั ะดะปั ัะปัััะตะฝะธั ะพัะฒะตัะพะฒ

---

## ๐ ะงะตะบะปะธัั ัะตะฐะปะธะทะฐัะธะธ

- [ ] ะญัะฐะฟ 0: ะะฐัััะพะนะบะฐ API ะบะปััะฐ ะธ ะฟะตัะตะผะตะฝะฝัั ะพะบััะถะตะฝะธั
- [ ] ะญัะฐะฟ 1: ะกะพะทะดะฐะฝะธะต ััััะบัััั ัะฐะนะปะพะฒ ะธ ะฑะฐะทะพะฒัั ะผะพะดัะปะตะน
- [ ] ะญัะฐะฟ 2: ะะตะฐะปะธะทะฐัะธั ัะบัะธะฟัะฐ ะธะฝะดะตะบัะฐัะธะธ
- [ ] ะญัะฐะฟ 3: ะะตะฐะปะธะทะฐัะธั RAG ะฟะพะธัะบะฐ ะธ ะพัะฒะตัะพะฒ
- [ ] ะญัะฐะฟ 4: ะะฝัะตะณัะฐัะธั ั ะฟะพะธัะบะพะผ
- [ ] ะญัะฐะฟ 5: ะะดะผะธะฝ-ะฟะฐะฝะตะปั ัะฟัะฐะฒะปะตะฝะธั
- [ ] ะญัะฐะฟ 6: ะขะตััะธัะพะฒะฐะฝะธะต ะธ ะฑะฐะณัะธะบัั
- [ ] ะะพะบัะผะตะฝัะฐัะธั ะดะปั ะฟะพะปัะทะพะฒะฐัะตะปะตะน

---

**ะะพัะพะฒะพ ะบ ัะตะฐะปะธะทะฐัะธะธ!** ๐

ะะฐัะฝะธัะต ั ะญัะฐะฟะฐ 0, ะทะฐัะตะผ ะฟะพัะปะตะดะพะฒะฐัะตะปัะฝะพ ัะตะฐะปะธะทัะนัะต ะบะฐะถะดัะน ััะฐะฟ. ะัะธ ะฒะพะทะฝะธะบะฝะพะฒะตะฝะธะธ ะฒะพะฟัะพัะพะฒ ะพะฑัะฐัะฐะนัะตัั ะบ ัััะตััะฒัััะตะน ะดะพะบัะผะตะฝัะฐัะธะธ AI ะฒ `docs/ai/`.

