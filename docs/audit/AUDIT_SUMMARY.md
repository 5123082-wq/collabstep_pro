# –ö—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞ –∞—É–¥–∏—Ç–∞ –∫–æ–¥–∞

**–î–∞—Ç–∞:** 2025-02-04  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-02-04  
**–°—Ç–∞—Ç—É—Å:** üî¥ –ü—Ä–æ–≤–µ—Ä–∫–∏ –Ω–µ –ø—Ä–æ—Ö–æ–¥—è—Ç (lint/test/typecheck)

---

## üìä –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

- `pnpm lint` ‚Äî –ø–∞–¥–∞–µ—Ç (–ø–∞—Ä—Å–∏–Ω–≥ `apps/api/drizzle.config.ts` + ~179 –æ—à–∏–±–æ–∫)
- `pnpm test` ‚Äî –ø–∞–¥–∞–µ—Ç (—é–Ω–∏—Ç `apps/web/tests/unit/stageCopy.spec.ts`)
- `pnpm typecheck` ‚Äî –ø–∞–¥–∞–µ—Ç (–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è web, –¥–µ—Å—è—Ç–∫–∏ `TS6133` –≤ —Ç–µ—Å—Ç–∞—Ö)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ –¥–ª—è API –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∏–∑ –∫–æ—Ä–Ω—è
- –í CI —Ç–∞–∫–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–±–ª–æ–∫–∏—Ä—É–µ—Ç –≤—Å–µ —à–∞–≥–∏

---

## ‚úÖ –ß—Ç–æ —É–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ (—Å–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å)

1. ‚úÖ –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ `module` ‚Üí `moduleItem` –≤ `admin-modules-repository.ts`
2. ‚úÖ –£–¥–∞–ª–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ `admin-platform-*`, ESLint —Å–∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω
3. ‚úÖ –•—É–∫–∏ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –±–µ–∑—É—Å–ª–æ–≤–Ω–æ –≤ `useFeatureFlags.ts`
4. ‚úÖ `<img>` ‚Üí `next/image` (–∏–ª–∏ —É–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤)
5. ‚úÖ `tsconfig.base.json` –∑–∞–ø–æ–ª–Ω–µ–Ω
6. ‚úÖ –Æ–Ω–∏—Ç `menuBuilder.spec.ts` —Ä–∞–Ω–µ–µ —á–∏–Ω–∏–ª—Å—è (—Ç–µ–∫—É—â–∞—è —Ä–µ–≥—Ä–µ—Å—Å–∏—è –ø–æ –º–µ–Ω—é –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç)

---

## üî¥ –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã (P0)

1) **–¢–µ—Å—Ç –Ω–∞ –∑–∞–ø—Ä–µ—â—ë–Ω–Ω—ã–π —ç—Ç–∞–ø**  
   - `apps/web/tests/unit/stageCopy.spec.ts` –ø–∞–¥–∞–µ—Ç: –Ω–∞—Ö–æ–¥–∏—Ç —É–ø–æ–º–∏–Ω–∞–Ω–∏—è –≤ –∞—É–¥–∏—Ç-–¥–æ–∫–∞—Ö (`AUDIT_README.md`, `AUDIT_SUMMARY.md`, `CODE_AUDIT.md`, `FIXES_ACTION_PLAN.md`, `VERIFICATION_CHECKLIST.md`).  
   - –ù—É–∂–Ω–æ: –∏—Å–∫–ª—é—á–∏—Ç—å –∞—É–¥–∏—Ç-–¥–æ–∫–∏ –∏–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–ª–∏ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏, —á—Ç–æ–±—ã –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω.

2) **Parsing error ESLint –¥–ª—è `drizzle.config.ts`**  
   - –§–∞–π–ª –Ω–µ –≤–∫–ª—é—á—ë–Ω –≤ `apps/api/tsconfig.json`.  
   - –ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ `include` (–ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–æ) –∏–ª–∏ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ `.eslintrc.cjs`.

3) **–ú–∞—Å—Å–∏–≤–Ω—ã–µ lint-–æ—à–∏–±–∫–∏ `any` –∏ –Ω–∞—Ä—É—à–µ–Ω–∏–π –ø—Ä–∞–≤–∏–ª**  
   - API: `apps/api/src/repositories/ai-agents-repository.ts` (20+ `any`), `wallet-repository.ts` (–≤—Å–µ –º–µ—Ç–æ–¥—ã —Å `tx: any`), `data/memory.ts:71`, `invitations-repository.ts:140,178`, `organizations-repository.ts:160`, `users-db-repository.ts:87`, `websocket/types.ts:15`.  
   - WEB: –º–Ω–æ–∂–µ—Å—Ç–≤–æ `any`/`ban-ts-comment`/`unused`/–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ (—Å–º. –æ—Ç—á—ë—Ç `report_lint.txt` ‚Äî `ai-hub/agents/page.tsx`, `performers/[section]/page.tsx`, `pm/tasks/page.tsx`, `finance/expenses/page-client.tsx`, `TasksListView.tsx`, `ArchivedProjectsList.tsx`, `ProjectsList.tsx`, `AIProjectPlanner.tsx` –∏ –¥—Ä.).  
   - –ü–æ–∫–∞ lint –Ω–µ –∑–µ–ª—ë–Ω—ã–π, CI –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω.

---

## üü° –í–∞–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã (P1)

4) **Typecheck –Ω–µ –ø–æ–∫—Ä—ã–≤–∞–µ—Ç API**  
   - –ö–æ—Ä–Ω–µ–≤–æ–π `package.json` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–æ–ª—å–∫–æ web.  
   - –ù—É–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å: `pnpm --filter @collabverse/web typecheck && pnpm --filter @collabverse/api typecheck`.

5) **Jest config –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —É—Å—Ç–∞—Ä–µ–≤—à–∏–π `globals`**  
   - `jest.config.cjs` –¥—É–±–ª–∏—Ä—É–µ—Ç `isolatedModules` –≤ `globals`.  
   - –ù—É–∂–Ω–æ —É–±—Ä–∞—Ç—å –±–ª–æ–∫ `globals`, –æ—Å—Ç–∞–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `transform`.

6) **–ü—Ä–æ–±–ª–µ–º–Ω—ã–π ESM-—Ö–µ–ª–ø–µ—Ä WebSocket –≤ —Ç–µ—Å—Ç–∞—Ö**  
   - `apps/api/src/websocket/server-runner.ts` —Å–æ–¥–µ—Ä–∂–∏—Ç `import.meta`, —á—Ç–æ –ª–æ–º–∞–µ—Ç Jest –ø–∞—Ä—Å–∏–Ω–≥ –ø—Ä–∏ –∫–æ—Å–≤–µ–Ω–Ω–æ–º –∏–º–ø–æ—Ä—Ç–µ.  
   - –ù—É–∂–µ–Ω guard –∏–ª–∏ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ ESM/CTest –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.

---

## üü¢ –£–ª—É—á—à–µ–Ω–∏—è (P2)

7) **–®—É–º –≤ —Ç–µ—Å—Ç–æ–≤—ã—Ö –ª–æ–≥–∞—Ö**  
   - `apps/api/src/repositories/expense-store.ts` –∏ factory ‚Äî –º–Ω–æ–∂–µ—Å—Ç–≤–æ `console.info`/`console.log`.  
   - –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ –∑–∞–≥–ª—É—à–∏—Ç—å –≤ `NODE_ENV === 'test'` –∏–ª–∏ –º–æ–∫–∞–º–∏.

8) **–°–∫—Ä–∏–ø—Ç `test` –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–Ω–∞–ø—à–æ—Ç—ã**  
   - `jest -u` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è CI.  
   - –°—Ç–æ–∏—Ç —É–±—Ä–∞—Ç—å `-u` –∏–ª–∏ –∑–∞–≤–µ—Å—Ç–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç.

---

## üéØ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã —Å–ª–µ–¥—É—é—â–µ–≥–æ —à—Ç—É—Ä–º–∞

1. P0: –ü–æ—á–∏–Ω–∏—Ç—å —Ç–µ—Å—Ç –Ω–∞ –∑–∞–ø—Ä–µ—â—ë–Ω–Ω—ã–π —ç—Ç–∞–ø (–∏—Å–∫–ª—é—á–∏—Ç—å –∞—É–¥–∏—Ç-–¥–æ–∫–∏ –∏–ª–∏ –ø–µ—Ä–µ—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞—Ç—å), –≤–∫–ª—é—á–∏—Ç—å `drizzle.config.ts` –≤ tsconfig, –∑–∞–∫—Ä—ã—Ç—å –∫–ª—é—á–µ–≤—ã–µ lint-–∫–ª–∞—Å—Ç–µ—Ä—ã (`any`, `ban-ts-comment`, –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏).  
2. P1: –û–±–Ω–æ–≤–∏—Ç—å `typecheck` (–¥–æ–±–∞–≤–∏—Ç—å API) –∏ `jest.config.cjs` (—É–±—Ä–∞—Ç—å `globals`), –∑–∞—â–∏—Ç–∏—Ç—å `server-runner.ts` –æ—Ç Jest.  
3. P2: –ó–∞–≥–ª—É—à–∏—Ç—å —à—É–º –ª–æ–≥–æ–≤ –∏ —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–∫—Ä–∏–ø—Ç `test`.

---

## üìÅ –î–æ–∫—É–º–µ–Ω—Ç—ã

- **CODE_AUDIT.md** - –ü–æ–ª–Ω—ã–π –∞—É–¥–∏—Ç —Å –∞–Ω–∞–ª–∏–∑–æ–º
- **FIXES_ACTION_PLAN.md** - –î–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π (–æ–±–Ω–æ–≤–ª–µ–Ω)
- **AUDIT_SUMMARY.md** - –≠—Ç–∞ —Å–≤–æ–¥–∫–∞ (–æ–±–Ω–æ–≤–ª–µ–Ω–∞)
- **VERIFICATION_CHECKLIST.md** - –ß–µ–∫–ª–∏—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –û—Ç–∫—Ä—ã—Ç—å `FIXES_ACTION_PLAN.md`
2. –ù–∞—á–∞—Ç—å —Å –≠—Ç–∞–ø–∞ 1 (–∫—Ä–∏—Ç–∏—á–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è)
3. –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–ø—É—Å–∫–∞—Ç—å `pnpm lint && pnpm test`

---

**–û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö P0 –ø—Ä–æ–±–ª–µ–º:** 1-2 —á–∞—Å–∞
