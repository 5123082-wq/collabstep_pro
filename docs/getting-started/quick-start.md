# Быстрый старт

> **Последнее обновление:** 2025-11-23

Это руководство поможет вам быстро начать работу с Collabverse.

## Предварительные требования

- Node.js 20 (см. `.nvmrc`)
- pnpm 9+

## Установка

1. Клонируйте репозиторий:

```bash
git clone <repository-url>
cd collabstep-new-3
```

2. Установите зависимости:

```bash
pnpm install
```

3. Подготовьте переменные окружения:

```bash
pnpm ensure-env
```

Это создаст файл `.env` с базовыми настройками.

## Запуск в режиме разработки

```bash
pnpm dev
```

Откройте [http://localhost:3000](http://localhost:3000) в браузере.

## Тестирование

Для запуска тестов с базой данных см. [Локальный запуск тестов](local-testing.md).

## Демо-аккаунт

Для быстрого тестирования доступен один демо-аккаунт администратора:

### Администратор

- **Email**: `admin.demo@collabverse.test`
- **Пароль**: `admin.demo` (или значение из переменной окружения `DEMO_ADMIN_PASSWORD`)
- **ID**: `00000000-0000-0000-0000-000000000001`
- **Роли**: `productAdmin`, `featureAdmin`

> **Важно:** В системе настроен только один демо-администратор. Все организации и проекты принадлежат этому администратору. Новые пользователи могут регистрироваться через форму регистрации на странице `/register`.

## Основные команды

| Команда         | Описание                                        |
| --------------- | ----------------------------------------------- |
| `pnpm dev`      | Запуск в режиме разработки                      |
| `pnpm build`    | Сборка для production                           |
| `pnpm start`    | Запуск production сборки                        |
| `pnpm test`     | Запуск юнит-тестов                              |
| `pnpm test:e2e` | Запуск E2E тестов                               |
| `pnpm verify`   | Полная проверка (линт, typecheck, build, тесты) |

## Структура проекта

```text
collabstep-new-3/
├── apps/
│   ├── api/          # Backend API
│   └── web/          # Frontend Next.js приложение
├── docs/             # Документация
├── config/           # Общие конфигурации
└── scripts/          # Служебные скрипты
```

## Регистрация новых пользователей

Новые пользователи могут зарегистрироваться через форму регистрации:

1. Перейдите на страницу `/register`
2. Заполните форму:
   - Имя (обязательно)
   - Email (обязательно, не может быть `admin.demo@collabverse.test`)
   - Пароль (минимум 6 символов)
   - Должность (опционально)
3. После регистрации пользователь будет создан в базе данных и сможет войти в систему

> **Примечание:** Все новые пользователи создаются со статусом `active` и пустыми ролями. Администратор может управлять правами пользователей через админ-панель.

## Очистка базы данных

Если необходимо очистить базу данных и оставить только демо-администратора:

```bash
npx tsx scripts/cleanup-users-db.ts
```

Этот скрипт:

- Удаляет всех пользователей кроме `admin.demo@collabverse.test`
- Переназначает все организации и проекты на демо-администратора
- Настраивает права администратора

Подробнее см. [DATABASE_CLEANUP_GUIDE.md](../runbooks/DATABASE_CLEANUP_GUIDE.md)

## Следующие шаги

- Прочитайте [полное руководство по настройке](setup.md)
- Настройте Vercel Postgres и Google OAuth по [подробной инструкции](vercel-postgres-setup.md)
- Ознакомьтесь с [архитектурой системы](../architecture/system-analysis.md)

## Возникли проблемы

Если что-то не работает:

1. Убедитесь, что версии Node.js и pnpm соответствуют требованиям
2. Проверьте, что `.env` файл создан и содержит все необходимые переменные
3. Попробуйте очистить кэш: `rm -rf node_modules .next && pnpm install`
4. Обратитесь к [полному руководству по настройке](setup.md)
