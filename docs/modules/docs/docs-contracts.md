# Документы — Контракты

**Статус:** partial
**Владелец:** product/engineering
**Создан:** 2026-01-07
**Последнее обновление:** 2026-01-07

## Назначение

Контракты фиксируют договоренности между организациями и исполнителями. Контракт связан с задачей и финансовыми операциями (эскроу/выплаты).

## Текущее состояние (по базе и коду)

- Есть сервис и репозиторий контрактов (`contractService`, `contractsRepository`).
- Контракт создаётся от задачи и хранит сумму, валюту, статусы и связи с организацией/исполнителем.
- UI‑страницы для `/docs/contracts` ещё не реализованы.

## Модель данных (кратко)

- `taskId` — задача‑источник контракта.
- `performerId` — исполнитель.
- `organizationId` — организация‑заказчик.
- `amount`, `currency` — сумма и валюта.
- `status` — текущий статус контракта.

## Статусы и жизненный цикл

Статусы (по коду):
- `offer` — оффер создан.
- `accepted` — оффер принят исполнителем.
- `funded` — средства зарезервированы.
- `completed` — работы завершены.
- `paid` — средства выплачены.
- `disputed` — спор.

Типовой переход:
`offer` → `accepted` → `funded` → `completed` → `paid`.

## Спорные статусы и роли

- **`disputed`** — фиксирует спор по контракту. Разрешение спора требует участия админа/поддержки.
- **Роли:**
  - заказчик (организация/PM) — инициирует оффер, финансирует и завершает;
  - исполнитель — принимает оффер и подтверждает выполнение;
  - администратор/поддержка — подключается при споре.
  - подробная матрица прав — [Роли и права](../../platform/roles-permissions.md).

## Основные сценарии

1. **Создать оффер** из задачи.
2. **Принять оффер** исполнителем.
3. **Финансировать** контракт через кошелёк.
4. **Завершить** работу и подтвердить.
5. **Выплатить** средства исполнителю.
6. **Открыть спор** и зафиксировать статус `disputed`.

## Создание

Создание контракта предполагается из контекста задачи (действия задачи или кнопка «Создать» в разделе «Документы» с выбором типа «Контракт»). До появления UI рекомендуется фиксировать источник контракта как задачу и организацию‑заказчика.

## Взаимодействия с другими разделами

- **Проекты и задачи:** контракт создаётся из задачи и наследует контекст проекта.
- **Финансы:** удержание и выплата средств проходят через кошелёк и транзакции.
- **Поддержка:** разрешение спорных кейсов.

## Связанные документы

- [Финансы — Обзор](../finance/finance-overview.md)
- [Проекты и задачи — Проекты](../projects-tasks/projects-tasks-projects.md)
- [Проекты и задачи — Задачи](../projects-tasks/projects-tasks-tasks.md)
- [Документы — Обзор](./docs-overview.md)
