# Документы — Обзор

**Статус:** partial
**Владелец:** product/engineering
**Создан:** 2026-01-07
**Последнее обновление:** 2026-01-07

## Назначение

Раздел «Документы» отвечает за хранение и управление рабочими документами, контрактами и бренд‑материалами. Раздел формирует единый контур знаний и договоренностей между командами и организациями.

## Навигация

- `/docs/files` — файлы документов
- `/docs/contracts` — контракты
- `/docs/brand-repo` — бренд‑репозиторий

## Состав раздела

- [Документы — Файлы](./docs-files.md)
- [Документы — Контракты](./docs-contracts.md)
- [Документы — Бренд‑репозиторий](./docs-brand-repo.md)

## Текущее состояние (по базе и коду)

- UI‑страницы для `/docs/*` ещё не реализованы.
- В доменной модели есть `documents`, `document_versions` и связь документов с файлами через `project_files`.
- Файловые эндпоинты поддерживают `entityType=document` и связывание файлов с документами.
- Реализованы репозитории документов и архивирования (используются в сценариях закрытия организаций).
- Контрактная логика реализована в сервисах и репозитории контрактов (используется финансовым модулем).
- В админской таблице модулей есть раздел `documents`, а бренд‑репозиторий помечен как beta‑доступ.

## Модель данных (кратко)

- **Document:** `id`, `projectId`, `title`, `type?`, `status?`, `createdAt`, `updatedAt`.
- **DocumentVersion:** `id`, `documentId`, `fileId`, `version`, `createdBy`, `createdAt`, `notes?`.
- **ProjectFiles:** связь документов с файлами и сущностями через `project_files`.

## Основные сценарии

1. **Создание документа:** пользователь создаёт карточку документа и связывает её с проектом.
2. **Версионирование:** загрузка новой версии файла к документу.
3. **Обновление атрибутов:** изменение названия, типа и статуса документа.
4. **Контрактный поток:** создание оффера из задачи, принятие, финансирование и завершение.
5. **Бренд‑репозиторий:** хранение бренд‑гайдов, ассетов, презентаций.
6. **Архивирование:** документы учитываются при закрытии/архивировании организации.

## Создание

Кнопка «Создать» для раздела «Документы» должна открывать выбор типа:
- документ/файл;
- контракт;
- бренд‑материал.

UI‑реализация планируется, на уровне доменной модели функции создания уже есть (репозитории документов и контрактов).

## Доступность по ролям

- Доступ наследуется от организации и проекта.
- Контракты предполагают разделение ролей: заказчик (организация/PM), исполнитель (performer), администратор/поддержка для споров.
- Подробная матрица прав — [Роли и права](../../platform/roles-permissions.md).

## Взаимодействия с другими разделами

- **Проекты и задачи:** документы привязаны к проектам/задачам и хранятся рядом с файлами проекта.
- **Финансы:** контракты связаны с оплатами, эскроу и статусами выплат.
- **Организация:** документы учитываются при архивировании/закрытии организаций.
- **AI‑хаб:** документы входят в контур индексирования для AI (через админ‑настройки).
- **Рабочий стол:** есть виджет «Документы» со сводным статусом.

## Ограничения и планируемое

- UI‑страницы и CRUD‑операции для документов/контрактов пока не реализованы.
- Набор статусов документов определяется бизнес‑процессами и будет зафиксирован в отдельной спецификации.

## Связанные документы

- [Документы — Файлы](./docs-files.md)
- [Документы — Контракты](./docs-contracts.md)
- [Документы — Бренд‑репозиторий](./docs-brand-repo.md)
- [Проекты и задачи — Файлы](../projects-tasks/projects-tasks-files.md)
- [Финансы — Обзор](../finance/finance-overview.md)
- [Организация — Обзор](../organization/organization-overview.md)
- [Системный анализ](../../architecture/system-analysis.md)
