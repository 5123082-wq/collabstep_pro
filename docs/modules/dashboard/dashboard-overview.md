# Рабочий стол — Обзор

**Статус:** partial
**Владелец:** product/engineering
**Создан:** 2026-01-07
**Последнее обновление:** 2026-01-07

## Назначение

Рабочий стол (`/app/dashboard`) — входная точка в приложение. Он агрегирует ключевые показатели и быстрые действия по всем разделам платформы и служит центральным экраном состояния рабочего пространства.

## Навигация

- Левое меню → **Рабочий стол**.
- Прямой маршрут: `/app/dashboard`.

## Доступность и фичефлаги

- Доступен всем авторизованным пользователям (по данным модуля админки — defaultAudience `everyone`).
- API рабочего стола защищено авторизацией; без сессии возвращается `UNAUTHORIZED`.
- Функциональность виджетов включается флагом `WORKSPACE_DASHBOARD`.
- Детали ролей см. [Роли и права](../../platform/roles-permissions.md).

## Текущее состояние (по базе и коду)

- UI-страница есть: `/app/dashboard` рендерит `DashboardShell`.
- Конфигурация виджетов и описания — `apps/web/components/dashboard/widget-registry.tsx`.
- Данные виджетов — `GET /api/dashboard/data`.
- Лэйаут виджетов — `GET/POST /api/dashboard/layout`.
- Пресеты и каталог виджетов доступны в UI.
- Реальные данные есть только для виджета **Проекты и задачи**, остальные используют мок‑данные.

## Основные сценарии

1. **Просмотр состояния:** открыть рабочий стол и быстро оценить ключевые показатели по проектам, AI, маркетплейсу, финансам и документам.
2. **Обновление данных:** обновить один виджет или все виджеты (перезагрузка данных).
3. **Настройка состава виджетов:** открыть каталог виджетов и добавить/убрать нужные карточки.
4. **Настройка лэйаута:** перемещать и менять размеры карточек, чтобы собрать удобное расположение.
5. **Работа с пресетами:** выбрать готовый пресет, сохранить текущий как пользовательский, удалить свой пресет.
6. **Сброс лэйаута:** вернуть расположение по умолчанию.

## Виджеты и источники данных

| Виджет | Назначение | Источник данных | Статус данных |
| --- | --- | --- | --- |
| Проекты и задачи | Просрочки, дедлайны, блокеры | `GET /api/dashboard/data` → `projects-tasks` | реальные данные |
| AI-агенты | Статусы агентов и инцидентов | `GET /api/dashboard/data` | мок‑данные |
| Маркетплейс реакции | Отзывы, рейтинг, обращения | `GET /api/dashboard/data` | мок‑данные |
| Финансы | MRR/ARR/runway | `GET /api/dashboard/data` | мок‑данные |
| Маркетинг | Метрики кампаний | `GET /api/dashboard/data` | мок‑данные |
| Комьюнити | Активность комнат | `GET /api/dashboard/data` | мок‑данные |
| Документы | Сроки и согласования | `GET /api/dashboard/data` | мок‑данные |
| Поддержка | Очередь тикетов/SLA | `GET /api/dashboard/data` | мок‑данные |
| Системный статус | Состояние интеграций | `GET /api/dashboard/data` | мок‑данные |
| Быстрые действия | Быстрые сценарии | UI‑логика | мок‑данные |

## Данные и API

- `GET /api/dashboard/data?widgets=...` — возвращает данные виджетов (для `projects-tasks` — реальные, остальные — заглушки).
- `GET /api/dashboard/layout` — текущий лэйаут виджетов пользователя.
- `POST /api/dashboard/layout` — сохранить лэйаут и активный пресет.

## Хранение и состояние

- Лэйаут хранится в памяти сервера (per‑user), с fallback в локальном Zustand‑сторе.
- Состояния виджетов: `loading`, `content`, `empty`, `error`.
- Для пустого/ошибочного состояния показываются fallback‑данные и уведомления.

## Взаимодействия с другими разделами

- **Проекты и задачи:** виджет собирает просрочки, дедлайны и блокеры. [Проекты](../projects-tasks/projects-tasks-projects.md)
- **AI-хаб:** агрегируются статусы агентов и пайплайнов. [AI‑хаб](../ai-hub/ai-hub-overview.md)
- **Маркетплейс:** отзывы и реакции по шаблонам/продуктам. [Маркетплейс](../marketplace/marketplace-overview.md)
- **Финансы:** динамика выручки/расходов. [Финансы](../finance/finance-overview.md)
- **Маркетинг:** ключевые KPI кампаний. [Маркетинг](../marketing/marketing-overview.md)
- **Комьюнити:** активность в комнатах и модерация. [Комьюнити](../community/community-overview.md)
- **Документы:** статус согласований и дедлайнов. [Документы](../docs/docs-overview.md)
- **Поддержка:** тикеты и SLA. [Поддержка](../support/support-overview.md)

## Планируемое развитие

- Реальные источники данных для всех виджетов.
- Общие фильтры по workspace/периоду.
- Более гибкая кастомизация карточек.

## Связанные документы

- [Проекты и задачи — Метрики](../projects-tasks/projects-tasks-metrics.md)
- [Документы — Обзор](../docs/docs-overview.md)
- [Системный анализ](../../architecture/system-analysis.md)
