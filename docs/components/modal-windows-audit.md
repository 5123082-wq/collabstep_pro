# Аудит модальных окон проекта

**Дата создания:** 2025-01-06  
**Дата обновления:** 2025-01-06  
**Цель:** Организация модальных окон по стандартам дизайна

---

## Стандарты дизайна (выделенные пользователем)

### ✅ СТАНДАРТ 1: Меню/выпадающие окна

- **Компонент:** `AccountMenu`
- **Размер:** `w-[26rem]` (416px)
- **Характеристики:** Выпадающее меню с фиксированной шириной
- **Визуализация:** `apps/web/components/app/AccountMenu.tsx`

### ✅ СТАНДАРТ 2: Большие модальные окна (полноэкранные)

- **Компонент:** `LargeContentModal`
- **Размер:** Полноэкранное с padding `px-[72px] py-6 lg:px-[88px] lg:py-8`
- **Характеристики:** Для детальных просмотров с большим количеством контента
- **Визуализация:** `apps/web/components/ui/large-content-modal.tsx`

### ✅ СТАНДАРТ 3: Средние модальные окна

- **Компонент:** `ContentBlock`
- **Размер:** `max-h-[90vh]` с адаптивной шириной
- **Характеристики:** Формы, настройки, импорт
- **Визуализация:** `apps/web/components/ui/content-block.tsx`

### ⚠️ СТАНДАРТ 4: Боковые панели (требует доработки)

- **Компонент:** `SheetContent` (CommunicationDrawer)
- **Размер:** `sm:max-w-[440px] md:max-w-[500px] lg:max-w-[560px]`
- **Характеристики:** Боковые панели справа, но требуется доработка анимации открытия
- **Визуализация:** `apps/web/components/ui/sheet.tsx`
- **Примечание:** Не нравится как открывается, требуется отдельная работа

---

## Модальные окна, соответствующие стандартам

### ГРУППА 1: Большие модальные окна (LargeContentModal) ✅

| №   | Компонент             | Файл                                                       | Размер                  | Где используется                          | Описание                        |
| --- | --------------------- | ---------------------------------------------------------- | ----------------------- | ----------------------------------------- | ------------------------------- |
| 1   | `TemplateDetailModal` | `components/marketplace/templates/TemplateDetailModal.tsx` | Полноэкранное с padding | `/market/templates`                       | Детали шаблона маркетплейса     |
| 2   | `ProjectDetailModal`  | `components/pm/ProjectDetailModal.tsx`                     | Полноэкранное с padding | `/projects`, `ProjectsOverviewPageClient` | Детали проекта в модальном окне |
| 3   | `TaskDetailModal`     | `components/pm/TaskDetailModal.tsx`                        | Полноэкранное с padding | `/pm/tasks`, `ProjectDetailModal`         | Детали задачи с комментариями   |

**Всего:** 3 компонента  
**Базовый компонент:** `LargeContentModal`  
**Визуализация:** `apps/web/components/ui/large-content-modal.tsx`

---

### ГРУППА 2: Средние модальные окна (ContentBlock) ✅

| №   | Компонент             | Файл                                     | Размер                                    | Где используется                          | Описание                  |
| --- | --------------------- | ---------------------------------------- | ----------------------------------------- | ----------------------------------------- | ------------------------- |
| 1   | `BudgetSettingsModal` | `components/pm/BudgetSettingsModal.tsx`  | `max-h-[90vh]`                            | `/pm/projects/[id]`, `ProjectDetailModal` | Настройки бюджета проекта |
| 2   | `ProjectInviteModal`  | `components/pm/ProjectInviteModal.tsx`   | `max-w-[70vw]`, `max-h-[90vh]`            | `/pm/projects/[id]`, `ProjectDetailModal` | Приглашение в проект      |
| 3   | `InviteDialog`        | `components/right-rail/InviteDialog.tsx` | `max-w-[70vw]`, `max-h-[90vh]`            | HoverRail → DialogManager (глобально)     | Приглашение участника     |
| 4   | `CommandPalette`      | `components/app/CommandPalette.tsx`      | `max-w-[70vw]`, `max-h-[90vh]`, `z-[120]` | AppLayoutClient (глобально)               | Командная палитра поиска  |
| 5   | `CsvImportModal`      | `components/finance/CsvImportModal.tsx`  | `max-w-[70vw]`, `max-h-[90vh]`            | `/finance/expenses`                       | Импорт расходов из CSV    |

**Всего:** 5 компонентов  
**Базовый компонент:** `ContentBlock` + обертка  
**Визуализация:** `apps/web/components/ui/content-block.tsx`

---

### ГРУППА 3: Меню/выпадающие окна ✅

| №   | Компонент     | Файл                             | Размер              | Где используется      | Описание                    |
| --- | ------------- | -------------------------------- | ------------------- | --------------------- | --------------------------- |
| 1   | `AccountMenu` | `components/app/AccountMenu.tsx` | `w-[26rem]` (416px) | AppTopbar (глобально) | Меню аккаунта с настройками |

**Всего:** 1 компонент  
**Базовый компонент:** Кастомный компонент  
**Визуализация:** `apps/web/components/app/AccountMenu.tsx`

---

### ГРУППА 4: Боковые панели (Sheet) ⚠️

| №   | Компонент             | Файл                                            | Размер                                               | Где используется                      | Описание           | Статус               |
| --- | --------------------- | ----------------------------------------------- | ---------------------------------------------------- | ------------------------------------- | ------------------ | -------------------- |
| 1   | `CommunicationDrawer` | `components/right-rail/CommunicationDrawer.tsx` | `sm:max-w-[440px] md:max-w-[500px] lg:max-w-[560px]` | HoverRail → DrawerManager (глобально) | Чаты и уведомления | ⚠️ Требует доработки |

**Всего:** 1 компонент (из 6 Sheet компонентов)  
**Базовый компонент:** `Sheet` + `SheetContent`  
**Визуализация:** `apps/web/components/ui/sheet.tsx`  
**Примечание:** Остальные Sheet компоненты не соответствуют стандарту и находятся в разделе "Несоответствующие"

---

## Модальные окна, НЕ соответствующие стандартам

### БЛОК 1: Modal компоненты с размером `max-w-xl` (576px)

| №   | Компонент                    | Файл                                           | Размер             | Где используется                          | Описание                               | Рекомендация              |
| --- | ---------------------------- | ---------------------------------------------- | ------------------ | ----------------------------------------- | -------------------------------------- | ------------------------- |
| 1   | `CreateTaskWithProjectModal` | `components/pm/CreateTaskWithProjectModal.tsx` | `max-w-xl` (576px) | AppLayoutClient (глобально)               | Создание задачи с выбором проекта      | Перевести на ContentBlock |
| 2   | `CreateTaskModal`            | `components/pm/CreateTaskModal.tsx`            | `max-w-xl` (576px) | `/pm/projects/[id]`, `ProjectDetailModal` | Создание задачи в проекте              | Перевести на ContentBlock |
| 3   | `RestoreProjectDialog`       | `components/pm/RestoreProjectDialog.tsx`       | `max-w-xl` (576px) | `ArchivedProjectsList`                    | Восстановление архивированного проекта | Перевести на ContentBlock |

**Всего:** 3 компонента  
**Текущий базовый компонент:** `Modal` + `ModalContent`  
**Рекомендация:** Перевести на `ContentBlock` для соответствия стандарту средних модальных окон

---

### БЛОК 2: Modal компоненты с размером `max-w-lg` (512px)

| №   | Компонент                 | Файл                                                   | Размер             | Где используется    | Описание                            | Рекомендация              |
| --- | ------------------------- | ------------------------------------------------------ | ------------------ | ------------------- | ----------------------------------- | ------------------------- |
| 1   | `CreateOrganizationModal` | `components/organizations/CreateOrganizationModal.tsx` | `max-w-lg` (512px) | `/org/[orgId]/team` | Создание организации                | Перевести на ContentBlock |
| 2   | `InviteMemberModal`       | `components/organizations/InviteMemberModal.tsx`       | `max-w-lg` (512px) | `/org/[orgId]/team` | Приглашение участника в организацию | Перевести на ContentBlock |

**Всего:** 2 компонента  
**Текущий базовый компонент:** `Modal` + `ModalContent`  
**Рекомендация:** Перевести на `ContentBlock` для соответствия стандарту средних модальных окон

---

### БЛОК 3: Modal компоненты с размером `sm:max-w-[600px]`

| №   | Компонент            | Файл                                       | Размер             | Где используется | Описание           | Рекомендация              |
| --- | -------------------- | ------------------------------------------ | ------------------ | ---------------- | ------------------ | ------------------------- |
| 1   | `CreateAIAgentModal` | `components/ai-hub/CreateAIAgentModal.tsx` | `sm:max-w-[600px]` | `/ai-hub/agents` | Создание AI-агента | Перевести на ContentBlock |

**Всего:** 1 компонент  
**Текущий базовый компонент:** `Modal` + `ModalContent`  
**Рекомендация:** Перевести на `ContentBlock` для соответствия стандарту средних модальных окон

---

### БЛОК 4: Modal компоненты с размером `max-w-5xl` (1024px)

| №   | Компонент                      | Файл                                             | Размер               | Где используется            | Описание              | Рекомендация                                                   |
| --- | ------------------------------ | ------------------------------------------------ | -------------------- | --------------------------- | --------------------- | -------------------------------------------------------------- |
| 1   | `ProjectTemplateSelectorModal` | `components/pm/ProjectTemplateSelectorModal.tsx` | `max-w-5xl` (1024px) | `ProjectCreateWizardClient` | Выбор шаблона проекта | Рассмотреть переход на LargeContentModal или оставить как есть |

**Всего:** 1 компонент  
**Текущий базовый компонент:** `Modal` + `ModalContent`  
**Рекомендация:** Рассмотреть переход на `LargeContentModal` или оставить как есть, если размер оправдан

---

### БЛОК 5: Modal компоненты с размером `max-w-[95vw]`, `h-[90vh]`

| №   | Компонент               | Файл                                            | Размер                     | Где используется            | Описание                            | Рекомендация                             |
| --- | ----------------------- | ----------------------------------------------- | -------------------------- | --------------------------- | ----------------------------------- | ---------------------------------------- |
| 1   | `PlatformSettingsModal` | `components/settings/PlatformSettingsModal.tsx` | `max-w-[95vw]`, `h-[90vh]` | AppLayoutClient (глобально) | Настройки платформы (полноэкранный) | Рассмотреть переход на LargeContentModal |

**Всего:** 1 компонент  
**Текущий базовый компонент:** `Modal` + `ModalContent`  
**Рекомендация:** Рассмотреть переход на `LargeContentModal` для соответствия стандарту больших модальных окон

---

### БЛОК 6: Sheet компоненты с размером `max-w-[420px]` (не соответствуют стандарту)

| №   | Компонент            | Файл                                           | Размер          | Где используется                                               | Описание                 | Рекомендация                                                               |
| --- | -------------------- | ---------------------------------------------- | --------------- | -------------------------------------------------------------- | ------------------------ | -------------------------------------------------------------------------- |
| 1   | `RailSettingsDrawer` | `components/right-rail/RailSettingsDrawer.tsx` | `max-w-[420px]` | HoverRail → DrawerManager (глобально)                          | Настройки правого рельса | Привести к стандарту: `sm:max-w-[440px] md:max-w-[500px] lg:max-w-[560px]` |
| 2   | `AssistantDrawer`    | `components/right-rail/AssistantDrawer.tsx`    | `max-w-[420px]` | HoverRail → DrawerManager (глобально)                          | Ассистент                | Привести к стандарту: `sm:max-w-[440px] md:max-w-[500px] lg:max-w-[560px]` |
| 3   | `DocumentDrawer`     | `components/right-rail/DocumentDrawer.tsx`     | `max-w-[420px]` | HoverRail → DrawerManager (глобально)                          | Документы                | Привести к стандарту: `sm:max-w-[440px] md:max-w-[500px] lg:max-w-[560px]` |
| 4   | `ExpenseDrawer`      | `components/finance/ExpenseDrawer.tsx`         | `max-w-[420px]` | `/pm/projects/[id]`, `ProjectDetailModal`, `/finance/expenses` | Управление расходами     | Привести к стандарту: `sm:max-w-[440px] md:max-w-[500px] lg:max-w-[560px]` |

**Всего:** 4 компонента  
**Текущий базовый компонент:** `Sheet` + `SheetContent`  
**Рекомендация:** Привести размеры к стандарту `sm:max-w-[440px] md:max-w-[500px] lg:max-w-[560px]` и доработать анимацию открытия

---

### БЛОК 7: Sheet компоненты с размером `max-w-2xl` (672px), `side="bottom"`

| №   | Компонент   | Файл                                  | Размер                                               | Где используется            | Описание         | Рекомендация                              |
| --- | ----------- | ------------------------------------- | ---------------------------------------------------- | --------------------------- | ---------------- | ----------------------------------------- |
| 1   | `HoverRail` | `components/right-rail/HoverRail.tsx` | `max-w-2xl` (672px), `max-h-[80vh]`, `side="bottom"` | AppLayoutClient (глобально) | Hover-меню снизу | Оставить как есть (специфичный компонент) |

**Всего:** 1 компонент  
**Текущий базовый компонент:** `Sheet` + `SheetContent`  
**Рекомендация:** Оставить как есть, так как это специфичный компонент с нижним расположением

---

### БЛОК 8: Специальные компоненты (не модальные окна)

| №   | Компонент                   | Файл                                                      | Размер      | Где используется   | Описание                                              |
| --- | --------------------------- | --------------------------------------------------------- | ----------- | ------------------ | ----------------------------------------------------- |
| 1   | `ProjectCreateWizardClient` | `app/(app)/projects/create/ProjectCreateWizardClient.tsx` | `max-w-3xl` | `/projects/create` | Мастер создания проекта (страница, не модальное окно) |

**Всего:** 1 компонент  
**Примечание:** Это не модальное окно, а страница

---

## Сводная статистика

### Соответствующие стандартам

- **Большие модальные окна (LargeContentModal):** 3 компонента ✅
- **Средние модальные окна (ContentBlock):** 5 компонентов ✅
- **Меню/выпадающие окна:** 1 компонент ✅
- **Боковые панели (Sheet):** 1 компонент ⚠️ (требует доработки)

**Всего соответствующих:** 10 компонентов

### Не соответствующие стандартам

- **Modal `max-w-xl` (576px):** 3 компонента
- **Modal `max-w-lg` (512px):** 2 компонента
- **Modal `sm:max-w-[600px]`:** 1 компонент
- **Modal `max-w-5xl` (1024px):** 1 компонент
- **Modal `max-w-[95vw]`, `h-[90vh]`:** 1 компонент
- **Sheet `max-w-[420px]`:** 4 компонента
- **Sheet `max-w-2xl`, `side="bottom"`:** 1 компонент
- **Специальные (страницы):** 1 компонент

**Всего не соответствующих:** 14 компонентов

---

## План действий по унификации

### Приоритет 1: Привести к стандарту средних модальных окон

1. Перевести все Modal компоненты с размерами `max-w-xl`, `max-w-lg`, `sm:max-w-[600px]` на `ContentBlock`
2. Компоненты: `CreateTaskModal`, `CreateTaskWithProjectModal`, `RestoreProjectDialog`, `CreateOrganizationModal`, `InviteMemberModal`, `CreateAIAgentModal`

### Приоритет 2: Привести к стандарту больших модальных окон

1. Рассмотреть переход `PlatformSettingsModal` на `LargeContentModal`
2. Рассмотреть переход `ProjectTemplateSelectorModal` на `LargeContentModal` (или оставить как есть)

### Приоритет 3: Привести к стандарту боковых панелей

1. Обновить размеры всех Sheet компонентов (кроме `HoverRail`) до `sm:max-w-[440px] md:max-w-[500px] lg:max-w-[560px]`
2. Доработать анимацию открытия для всех Sheet компонентов
3. Компоненты: `RailSettingsDrawer`, `AssistantDrawer`, `DocumentDrawer`, `ExpenseDrawer`

### Приоритет 4: Создать стандарт для меню/выпадающих окон

1. Выделить `AccountMenu` как базовый компонент для меню
2. Создать документацию по использованию

---

## Файлы визуализации

| Компонент           | Файл                                             | Описание                                      |
| ------------------- | ------------------------------------------------ | --------------------------------------------- |
| `LargeContentModal` | `apps/web/components/ui/large-content-modal.tsx` | Полноэкранные модальные окна ✅               |
| `ContentBlock`      | `apps/web/components/ui/content-block.tsx`       | Средние модальные окна ✅                     |
| `Modal`             | `apps/web/components/ui/modal.tsx`               | Стандартные модальные окна (требует миграции) |
| `Sheet`             | `apps/web/components/ui/sheet.tsx`               | Боковые панели ⚠️                             |
| `AccountMenu`       | `apps/web/components/app/AccountMenu.tsx`        | Меню/выпадающие окна ✅                       |

---

## Примечания

- Все модальные окна проверены и классифицированы
- Стандарты основаны на выделенных пользователем компонентах
- Компоненты, не соответствующие стандартам, разделены по блокам в соответствии с размерами
- `ProjectCreateWizardClient` не является модальным окном, это страница
- `CommunicationDrawer` соответствует стандарту по размеру, но требует доработки анимации открытия
