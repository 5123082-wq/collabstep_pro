# План реализации UI для новой модели доступа

Этот документ описывает этапы реализации пользовательского интерфейса для работы с Организациями, Исполнителями и Двухэтапной системой доступа.

## Этап 1: Профиль Исполнителя (Performer Profile)

**Цель:** Дать пользователю возможность заполнить профессиональный профиль и стать видимым в каталоге.

### 1.1. Страница настроек профиля

*   **Путь:** `/settings/performer` (или вкладка в общих настройках).
*   **Компоненты:**
    *   Форма редактирования (`react-hook-form` + `zod`):
        *   `Specialization` (Select/Combobox).
        *   `Skills` (Input с тегами/chips).
        *   `Bio` (Textarea).
        *   `Rate` & `Employment Type`.
        *   `Is Public` (Switch/Toggle) — главный переключатель видимости.
    *   **API:** `GET/POST /api/me/performer-profile`.
    *   **UI Kit:** `Form`, `Input`, `Textarea`, `Switch`, `Button` (Save).

### 1.2. Визуализация в профиле (Read-only)

*   Отображение бейджа «Исполнитель» рядом с именем пользователя в шапке/сайдбаре.

---

## Этап 2: Организации (Organizations)

**Цель:** Позволить пользователям создавать свои команды (студии/агентства) и управлять ими.

### 2.1. Список организаций и переключатель

*   **Место:** Сайдбар (верхняя часть) или страница `/settings/organizations`.
*   **Функционал:**
    *   Список организаций, где юзер — участник.
    *   Кнопка «Создать организацию».
*   **API:** `GET /api/organizations`.

### 2.2. Модальное окно создания организации

*   **Компоненты:** `Dialog`.
*   **Поля:** Название, Описание, Тип (Закрытая/Открытая).
*   **API:** `POST /api/organizations`.

### 2.3. Страница управления организацией

*   **Путь:** `/org/[orgId]/settings` (или `/settings/organizations/[id]`).
*   **Вкладки:**
    1.  **Общие**: Редактирование названия/описания.
    2.  **Участники**:
        *   Таблица (`Table`) со списком членов.
        *   Колонки: Аватар, Имя, Роль, Статус, Действия (Удалить/Изменить роль).
        *   **API:** `GET /api/organizations/[id]/members`.
    3.  **Приглашения (Invites)**:
        *   Список отправленных приглашений (статус `pending`).
        *   Кнопка «Пригласить участника» (открывает модалку).
        *   Кнопка «Сгенерировать ссылку-приглашение».
        *   **API:** `GET/POST /api/organizations/[id]/invites`.

---

## Этап 3: Каталог Исполнителей (Marketplace)

**Цель:** Публичный поиск специалистов для приглашения в проекты.

### 3.1. Страница Каталога

*   **Путь:** `/performers` (доступна из главного меню).
*   **Компоненты:**
    *   **Фильтры (Sidebar/TopBar)**: Поиск по имени, Фильтр по специализации.
    *   **Сетка карточек (`Grid`)**:
        *   `PerformerCard`: Аватар, Имя, Специализация, Топ-3 навыка, Ставка.
        *   Кнопка «Посмотреть профиль».
        *   Кнопка «Пригласить» (Primary Action).
    *   **API:** `GET /api/performers`.

### 3.2. Модальное окно приглашения

*   **Триггер:** Кнопка «Пригласить» в карточке исполнителя.
*   **Логика:**
    1.  Выбор **Организации** (Select) — обязательное поле.
    2.  Выбор **Проекта** (Select, опционально) — "Пригласить сразу в проект...".
*   **API:** `POST /api/performers/[userId]/invite-to-organization`.

---

## Этап 4: Проекты и Двухэтапный доступ (Самое важное)

**Цель:** Реализовать безопасный флоу входа в проект через предпросмотр и одобрение.

### 4.1. Создание проекта (Новая модель)

*   **Место:** Кнопка "Новый проект" в дашборде.
*   **Изменения:** Добавить поле "Организация" (Select) при создании. Если у юзера нет организаций — скрывать или предлагать создать.
*   **API:** `POST /api/projects` (использовать новый эндпоинт).

### 4.2. Страница «Лендинг приглашения» (Invite Landing)

*   **Путь:** `/invite/project/[token]`.
*   **Доступ:** Публичный (но кнопка "Принять" требует авторизации).
*   **Состояние 1 (Loading):** Скелетон.
*   **Состояние 2 (Preview):**
    *   Заголовок "Вас приглашают в проект **[Название]**".
    *   Описание проекта.
    *   Статус приглашения (если юзер уже логинился).
    *   Кнопка: «Принять приглашение» (или «Войти», если не авторизован).
*   **Состояние 3 (Success/Pending Approval):**
    *   Сообщение: "Заявка отправлена. Ожидайте подтверждения от владельца проекта."
    *   Кнопка "На главную".
*   **API:**
    *   `GET /api/projects/invites/[token]` (данные для превью).
    *   `POST /api/projects/invites/[token]/accept` (экшен принятия).

### 4.3. Управление доступом в Проекте (Для владельца)

*   **Путь:** Внутри проекта -> Настройки -> Команда/Доступ.
*   **Секция «Заявки на вступление» (Pending Requests):**
    *   Видна только если есть инвайты со статусом `pending_owner_approval` или `accepted_by_user`.
    *   Список карточек/строк: Имя пользователя, Email, Источник приглашения.
    *   Кнопки: **«Одобрить» (Approve)** и **«Отклонить» (Reject)**.
*   **API:**
    *   `POST .../approve`
    *   `POST .../reject`

---

## Этап 5: Индикация и уведомления

1.  **Dashboard**:
    *   Виджет "Мои заявки": Показывает проекты, куда юзер постучался, но еще не одобрен.
    *   Виджет "Входящие заявки" (для владельцев): "3 человека хотят вступить в проект X".
2.  **Toasts**:
    *   Уведомления об успехе отправки приглашения.
    *   Уведомление "Ваш доступ к проекту X одобрен".

---

## Рекомендуемый порядок разработки

1.  **Frontend для Организаций (Этап 2)** — Базовая структура для группировки.
2.  **Frontend для Профиля (Этап 1)** — Чтобы было кого приглашать.
3.  **Каталог (Этап 3)** — Связующее звено.
4.  **Флоу приглашений (Этап 4)** — Финальная интеграция.

